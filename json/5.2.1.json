[{"id":"/sicpjs/5.2.1","tag":"TITLE","body":"5.2.1  \n    The Machine Model"},{"tag":"TEXT","id":"#p1","child":[{"body":"\n    The machine model generated by\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_machine"},{"body":"\n    is represented as a\n    function\n    with local state using the message-passing techniques\n    developed in chapter 3.  To build this model,\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_machine"},{"body":"\n    begins by calling the\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_new_machine"},{"body":"\n    to construct\n    the parts of the machine model that are common to all register\n    machines.  This basic machine model constructed by\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_new_machine"},{"body":"\n    is essentially a container for some registers and a stack, together with an\n    execution mechanism that processes the controller instructions one by one.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p2","child":[{"body":"\n\tThe function\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_machine"},{"body":"\n    then extends this basic model (by sending it\n    messages) to include the registers, operations, and controller of the\n    particular machine being defined.  First it allocates a register in\n    the new machine for each of the supplied register names and installs\n    the designated operations in the machine.  Then it uses an \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"assembler","tag":"#text"}]},{"body":" (described below in\n    section ","tag":"#text"},{"tag":"REF","body":"5.2.2","href":"/sicpjs/5.2.2"},{"body":") to transform the controller list\n    into instructions for the new machine and installs these as the\n    machine's instruction sequence.\n    \n\tThe function\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_machine"},{"body":"\n    returns as its value the modified machine model.\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":1,"eval":true,"prependLength":449,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0AcwFMKB9AJyYaoGcKn2ACgC2AQzIALKiSYAaUJwasSo4UwCUoAN65QehSyLt6YydKaCARMzaLe-dpfWDFy1RoDcuAL75i5ajpQCgBPAAcLaT52IkpaEk0tAwojegkmUQATQSiKGLi6dQ9QX0JSAvoAGxoaAGsiMNYw9iphQR4Q4QAjGkr5Ggj2UUCSHkTdfTI6PlAAN1FK0ABeUFEeHhoyds6evtABgWH4sa99ZNTQXlZSTKYCc2z5yvUJs7eAflABdhohDu7evJLKRaiQaAB3egHIYjUAAWjhq3WTG6lSYTleb30AC5QOksoIKKIqJVBE91EUfH5yrDqnUGqxKqIukxSUyWZUePJ2ay3GpxmcpqMKHMFsskRstjzKny5KBpSdMZwUsZLjxriRbvcZI8Fi8sR8vuwfkJpbKgTc7g95czWfDEWseCiumiMQazriiSSyXqvKV-BVQGJakwmi1hFRqLNQ0wAB6NO6CONheSmKQybm2zkC-RUAigHLqoV8UQkNjJpPxinaTGC6Yisji4tEsusZOsJ5ECzJynu5UXQSaJYAPlAZFO+m8X05TEu+cLjKzbfjlbC1Z07ubl2FPHFdPqjWlggVmY5y8PWdXFInWP7qsHy1HuR4N5K06dc4LVzsfAE56vOZYlu7DijYHBcPYAgiOI6Zyj+DjnuBDAAa+Zx3vQD4jowLCsEK-BljwLhFKAmJTqyH4bga3y-KuFokKCEL0MmnDrPEwThLOCISs6rq9pOVJlAEbHBqG0JHHQiGJsmqYweYp7kf0gziaMgFjvW+xhHuNQHmGrSCGJIyIQMV6KYcIyKnWwqrP4u4rGIYRJo+QaiCGukRlGMbxm2BBJjJZgZjaHJjLItbumFBnxEZSmaoRPZ8Xo6EFkOo6iGEYSVCErDSBqtzsBl0hKAAVqI8w8GQLRhBQgihWFWIDDJDn5lhPnqPIog2deAkBrCjpUAwJAuBBv7sOaoAbEYZAaDWaGGKqlT2FYvX9ZY8jwX+KhqPI43sJNlK+N1bFLSQSGyoIR1ZcK+QjKpiX4tkXqkuduRXfEnX7TSh2sf1HYLF2-5PZdsTXdoJEzSqaQZPdxKkg9Z1fcdz1A69b3UkJQQiaw52JrkfmwfJnKmTCxzyGEZCqVuRLsDYoE4WtQhpnJEp9cdrgbZEwqdZZMydp5mkrOdPP-rk8VqVZgv+MsNVqqwEUSRWgs9lLnwY7Lx3tomCvxrjjMnhpZnHPqBq4hjzStJGVDRpJPmaymzn+XKCoi4lmGjpRtX6E6bB4UwBGEqIVMsPI4ukIOIvu1k8zkKGpOCKTxFS5Ofqo4GEelpNTRbHH00ezh3u+6T8iw2BecUIRcfXiR-ofejLmhvwfDeTkwrawFuuq1yoAEEyDAk2T2d6FuQqZObQQrPXXt0MPIxN3wIt5l+6qq-+Q8jwkqlcw2k+r6wEt2bXMtKYZ6s+Qn7tnwPW8jC3cqn+f7tt4fBuofozvJf3d96J7uF0PhpeCF3oge6iynpFfwodn7n1TlHDOscybFFvmcbwr4yIznfmcaiQgcagEsF0LIwQmAzERoGLijoeLohFr4KuaN6Dj0ECvYGSRErzT4FYceK1gGr2Iu9ah+CG70PiISAhbAiEMKVLNCGBJYbjwutEJGhR45UMDBjLoQxyASEblghmrcswdwAUArObtRYzFuDMFYKi07qJMVVYWr554LjNBWKx64pZbmfFpekF4OTHh0fjRCR4nFhxfuIpKTlDEfzscXH+Ps-56OcR-d0X8S5lzIPIZ8gTz4oIogg8OmRI7pxjnHCBZ9fAfyQaRd8s4wn6AwTPCgQJcGZFAOYtR25ZHEIdMiVE5DkFdWrvQZpkhvEckSOcOaC0cGqMkOw6UXDBKBgGZYoRggFkyLyHIhI79bqQz9t6FZIjkbwMUbCK4RIGDMEyIyBaUxhBhDoNEwu6RWCnJusEq4YRiRCGubcmQZZNAADI-l4m2V8u5vzlhLDHo805Sc5mwkUIINmIymHjMUOwxFxRuGBm-ENBCFYewg0SicwB5zLksOktg1FsyDpBDpoheF+LGHBLujs0kcUMXJ1hM2UsVUeZIuCcwqqlguVlnYby9l1L6BXGFeWFcDKxHg2lqcklAraLYOlU4JOEqjEthlY0HmV4CVMu2bDNlJQOVsSPIiw1CqVWWGlGi9wVK+nSwcbKqs1qLhErOUwC5KryV2qzBqs1WrXWeNZAaxlCrmUmqrLM2FbFjJWsjRcW1AwHX8nFc6q4S88XusMYS9U7yqBCHxQCxVxKfWkqqsynsQI017XjUEHNXljIDHPHyqNxroaCGZW2uKTqeHNsaGJGK+kEx5tGTQ7tfaqzssbSYfeDAaBPOXdjZuds8aBQUqAAxmItxWNAsuigy6rG1LnvOK4obBABLQZMdSbiVj7gZEeXWobFxeICUU1+TlElRPzik1ppcKEVM-AuWljihFxINMBLgNNbA4qglouCCGRrtnhZ+qW36sK-rLNE5J8hIm4d9ooTmk4QNVL0DUrBOC8FLpXYBl6QQSGdJdN00ivSeF0ePUM1kHaU3jK4zQaZWYB2BkE6wU94n9mFBBvKi40bu1ScBhUCuHHAy3IciWMgtQXkKq07UKwGmNVUi1WEIgPAJDtCJNpoOv0pr5uCfpwz5mJBOB9JULsDb53OVcjwEqMYfKaNkgFfTvdybqUUHBpCkF6bBblPp1ZJ02ZnqdsEl2t6wpmYs1Z8QtQCO5z-X-Ej6T3RQPyZnOBt8ymYthBjFix7OAaPXUhra1m8s7r7oYmDDAot02gvbVruXEus3cCl18WHXbZM-gVojRWuAk2Mvp0jkDclp2jhV+O7tqvmqCH56Mg0GB8bGSwywe30SrS4KJuFQjfgWBIx647gr6u3fYSRzNPCEu5CS6Nz7ynRFg3k1270v22nXS81qk2AgCC-GEE1vg198Yd3bmF9+W5xCwhWIMaH7BYfo4ETYzEdjs2PzliuPH8iMvatWBUHepBxQqxJ2rLyiZyckAR1N+JnO9AP31tMErE3ZNc+p4ZMBm2udlfW7AsXGTkHkallR9dNHGlY5hwx9Z9puJdOM4gtTsIVc47Oiph7VRxn6+EOw1nV22Jm8xhUWOUOYerMYxshznbJHdpt9JteMKIf7zjEwMgRARd9NqYjhHoMhfnwLp3bug2bMaTGJs4JoQIhnvBSsSwR1LC32VvvLGgXmtxbDwnsLt9PQcTTxCjPbCc8+brkIuHdSN06x8SXmPgDS-u3L6n4W6fsELOz+7XPrkVlrvh837RQV5B6M77Vbv7NZ59+sEeoTteMbibH03lrW6CYdcNmFefleIXYLO4P2qw-Qxncb+H0Le+y-sR7xzJfz3OBn7Chf8CfBbvX4n-Ftrs+D8H8F8KAhxj9LAst1ExB2AQwRpj1WB9M393QP8IDWAoCYCV14C2tG5t9b84578U9gDQCM9OBox2A2AEs4C0CBBECDQP8SCBByCsDKD-Z0DEwcD-878u8gCj8M8zcaCsRkCHcccf9t8H4O48CuCFdx9gR6IwRIQ1dAwCCNdSEtdwdnUMZchalv4ywfhKg0QRovddMLgi1MFhRtC8heh9Cnd1l5ASAiA9CG0tUvs8JdCrCvc09XdAcCQCcas2Ivt-dA9g8Bpe9PDVRYYfDvMv5-DYwA8g9QEQ4sF-BVIv5wj10kifdnUGhMhhhQxnxakO5dYkNwsrJSZesUN+tN1wCyBtc70rI9EyjuBhoKjGZLA9EaiL4rJ9N6c4srAECRYtwBhbJf8rB252jJ1O5fg2wYJakf0cJojYigjqpI8z4cYOdOcMYAi4iJIJUljli75nCf5XC-x3DhYQo9i75Cii8Oszjziz4Z8xoODBiKQbiuc0kMieEMYHEdCQgeMZQ2ZUkdwjDVQTDfjRo3jdc2I4w8h0d31yI6FDjLCBALtJoLZ7M5NVQrg7C9D4SdDET2B98kCDAUT9ssS9hSSCSjYvhYxoTKBYTORdiP5YYXC8TWo1ivwdxEc34KMz4twZBqS2w0Q1AyxxRmVmS9CBASt3YC1MCWgSBkI+TyxBTokKTljPhOBiTgCuQ2ShcQTPilxol2AfiFSBSUR7ltTbj4k0kXiLTz5HYVTI9cR1SmBUTY4PloJXJNDjTWRTTflrSbT3YrTzTOdHYikDRvA1CeEVDWMcSLDxT2Br4gSmJqShhaSFQYyjj4ygysR8jOTQksywosicjVlCJnxi8ijQzljCUdwKz4lwz3ilF94nNVI0QRQuiVhSTXwWzO4hg1BxQOzMRTMXNUCWCoJ159ACAezZxMc3Tb8JzHUv1glLBMg7lLAekzhTM20qChAxzP42sRTtk5yM0pZDypzghu0Tz+dFzlyZBVz2N1znUIDBBYwRkpY2yd03TYw48dN4E+wryVy1zxyHzjIdzQNMT7DSQlsQL0FjQaJLAURKoQgHjcsNcjMStMlKkEEKYBh9yCQlsaykLtNxRYY8KEFEpj0wgikSl+J7yeFpBzYFgqAAAvCwECt8-s38hVJc-8u8wCnhYeHgd5CgQZNQdYQBNEjii4ESvzZgJfCA-g9-HdFzDnY2AhaSqcsAozDnT4DTQcZSoMVSsS2Socrc+SwklArc3Sj+FS0SmSqvbBDTYc6A6grSndTckc7cvSqSwyuyywOi6gBi5i0y2g7cei+aZiyyu+XEGpLy5gOiBieQzgAARy7BmC4j6IAoSmCX4sEskHrNq33nMvcowISzYKuNwM63RIwi5PNMKqcr+Da0lNqglxgUKTZO2191cnoLIMwKG2YLquwLKo4N3QB3vGqp1Lcrqpy200arCmaoKTgQj1KTyut2MqKrgKbON3lFN1Wv6vWrayDV8JpSYFIMYN6uXQsqOxNxOy6tOu0wwJMrjQ3MaAsqWyTz0za0MwmpgOM0OvoFqpgKmp0zeouCc3AJ2u+ojIbM6vKKTUxC7KSXFEsAACpSAjofUkbbyaLAxsrhhhKDLmAQLEoYr1KM8bAgqBDRZf4eBPL8aSaT8WBybDQeZQlKa8NxQeZ2UrKjQTQRBaa4q5D6AkqUqRQuI6sUMxiqLMqFUcahKJBlqggn0HIQwQhC5mQ0RiiZh1TfhGl+Z1hNhBBlbVbvQiRWNltxirhLRtQfVBoph2BMh7SzhPhLaHh8Du0ta7bHDnVHR9bDaiTtbE9QjJV1RSSbb-aHb9AnbNQrQdR78mBkqFgDamAVagUCRmV3bMgxgKRa806A8w779vathfbYZ07M75b6BCMqaDsYtEyDBGiHArAybPaPsZtK66ZbMPNxKgkFU+tTsGbnAxUISa5XIZBwRhz7YHwut1JSi95oa66oIqixitx6iZ7Qwe62j+j1I3yMYmzOyWBghHkvd4C46uwo4+zwLd6RQKBHlBi9wFpbU-KqAArL99r5B0tQaH6n6nAzauzaUTa0Rb6WFbVSZ2E45uRxk2jp9u4zatUFhqgyAiy+tYb3Qid1RnadQ4ZJQEV3ALs57YC1aNAoNapf78HxQQSVV-i69osmjEVWT-SDRiHTbKK5cz4akKHLBhB7DqB0pEKtRrQ6YxidcJLVRLA6ZVg9DNgcjMhMbqLeLAxFaqH66kHoN1InhxQC6sHNpa6Ysnl8HLyFULao6rbdRngXLWHsHsEQQBatHho3RIqU6oZvRyQKEBznVNj+AJ6XF70dwoskkpcikUHlBwL8jCGwpEouKbymHyIMKVizC3H4iBpmU0lnAZrxi3GWLKKeK9AtUZa8abLO6sQtUSwyCPGz4cNK7o8r7ci-tIonRkqfZdp8LEo0nBwMmhGTBaal8imKBGbHakLinw6sRrK1Kl9chYHrCadamT7JoemI6xo46WbKnxnDJJn6nTzanOa7Hial9YGJH+AFHnKP5Pgdn4G9m6Yaa8ml8wJ+GXL5GzmuatmfLRm9CD5edRgZm9BPgb6sIkhFmvnVg0ofZ7pr6wgkcQXZl7mOmfKECXL9NznhmfLRiXLfmQW9Loq+aLHZDGIDA6nUrEQkMJbKrQAcm5bB76AunmiZAa6kNejKZumm6xNaYUNzC8MKXkNcHZQa6K6WWrnyjt9aUaHNVnUv5aVfG+WmWKHeV34ynuXGXcHWWcHtHEV27PNxs-yInSXKHqX+X3BQWO4xT9CNaRQkNujh6mBR7qWRZscpjBltXeysIOdqXM9xGTnV7xbnBbWNB5BskPWLJ9BHWnmZRRjnAnjXx-XhQxnD6Vmo5bGwoMGyF0y8SEzUsFUkMYUtwGAyALljWlhMQMZqWpZbVRB2EcFi26W-T9AVVbVOBzdX7RB5Aug35RBQAABSJpWhs+W1JYdhM6etxtvvBt9trEFVU+SwaRLoFaBBWhFVYySwLt1qWuqwcd+d6VQQAABgpEHbCgWV+IbszYkxXOeIQSOlYWmQWhneracBwcWkvYXZLY3fLaxGPcz1ey4EXa-ofbeCffHavdHffYQUEx3dHYbyXc3axGsD3evPIUpGFaZd8YzazauOffkAwFXYADZoPZXtG4O93t8S35AAAWddrwcl+Dse2CSkHl9l7DhDgbbBItooIAA","body":"function make_machine(register_names, ops, controller) {\n    const machine = make_new_machine();\n    for_each(register_name => \n               machine(\"allocate_register\")(register_name), \n             register_names);\n    machine(\"install_operations\")(ops);\n    machine(\"install_instruction_sequence\")\n           (assemble(controller, machine));\n    return machine;\n} "}]},{"tag":"SUBHEADING","id":"#h1","child":[{"body":"Registers","tag":"#text"}]},{"tag":"TEXT","id":"#p3","child":[{"body":"\n    We will represent a register as a\n    function\n    with local state, as in\n    chapter 3.  The\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_register"},{"body":" creates a register that\n    holds a value that can be accessed or changed:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":2,"eval":true,"prependLength":448,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0AcwFMKB9AJyYaoGcKn2ACgC2AQzIALKiSYAaUJwasSo4UwCUoAN65QehSyLt6YydKaCARMzaLe-dpfWDFy1RoDcuAL75i5ajpQCgBPAAcLaT52IkpaEk0tAwojegkmUQATQSiKGLi6dQ9QX0JSAvoAGxoaAGsiMNYw9iphQR4Q4QAjGkr5Ggj2UUCSHkTdfTI6PlAAN1FK0ABeUFEeHhoyds6evtABgWH4sa99ZNTQXlZSTKYCc2z5yvUJs7eAflABdhohDu7evJLKRaiQaAB3egHIYjUAAWjhq3WTG6lSYTleb30AC5QOksoIKKIqJVBE91EUfH5yrDqnUGqxKqIukxSUyWZUePJ2ay3GpxmcpqMKHMFsskRstjzKny5KBpSdMZwUsZLjxriRbvcZI8Fi8sR8vuwfkJpbKgTc7g95czWfDEWseCiumiMQazriiSSyXqvKV-BVQGJakwmi1hFRqLNQ0wAB6NO6CONheSmKQybm2zkC-RUAigHLqoV8UQkNjJpPxinaTGC6Yisji4tEsusZOsJ5ECzJynu5UXQSaJYAPlAZFO+m8X05TEu+cLjKzbfjlbC1Z07ubl2FPHFdPqjWlggVmY5y8PWdXFInWP7qsHy1HuR4N5K06dc4LVzsfAE56vOZYlu7DijYHBcPYAgiOI6Zyj+DjnuBDAAa+Zx3vQD4jowLCsEK-BljwLhFKAmJTqyH4bga3y-KuFokKCEL0MmnDrPEwThLOCISs6rq9pOVJlAEbHBqG0JHHQiGJsmqYweYp7kf0gziaMgFjvW+xhHuNQHmGrSCGJIyIQMV6KYcIyKnWwqrP4u4rGIYRJo+QaiCGukRlGMbxm2BBJjJZgZjaHJjLItbumFBnxEZSmaoRPZ8Xo6EFkOo6iGEYSVCErDSBqtzsBl0hKAAVqI8w8GQLRhBQgihWFWIDDJDn5lhPnqPIog2deAkBrCjpUAwJAuBBv7sOaoAbEYZAaDWaGGKqlT2FYvX9ZY8jwX+KhqPI43sJNlK+N1bFLSQSGyoIR1ZcK+QjKpiX4tkXqkuduRXfEnX7TSh2sf1HYLF2-5PZdsTXdoJEzSqaQZPdxKkg9Z1fcdz1A69b3UkJQQiaw52JrkfmwfJnKmTCxzyGEZCqVuRLsDYoE4WtQhpnJEp9cdrgbZEwqdZZMydp5mkrOdPP-rk8VqVZgv+MsNVqqwEUSRWgs9lLnwY7Lx3tomCvxrjjMnhpZnHPqBq4hjzStJGVDRpJPmaymzn+XKCoi4lmGjpRtX6E6bB4UwBGEqIVMsPI4ukIOIvu1k8zkKGpOCKTxFS5Ofqo4GEelpNTRbHH00ezh3u+6T8iw2BecUIRcfXiR-ofejLmhvwfDeTkwrawFuuq1yoAEEyDAk2T2d6FuQqZObQQrPXXt0MPIxN3wIt5l+6qq-+Q8jwkqlcw2k+r6wEt2bXMtKYZ6s+Qn7tnwPW8jC3cqn+f7tt4fBuofozvJf3d96J7uF0PhpeCF3oge6iynpFfwodn7n1TlHDOscybFFvmcbwr4yIznfmcaiQgcagEsF0LIwQmAzERoGLijoeLohFr4KuaN6Dj0ECvYGSRErzT4FYceK1gGr2Iu9ah+CG70PiISAhbAiEMKVLNCGBJYbjwutEJGhR45UMDBjLoQxyASEblghmrcswdwAUArObtRYzFuDMFYKi07qJMVVYWr554LjNBWKx64pZbmfFpekF4OTHh0fjRCR4nFhxfuIpKTlDEfzscXH+Ps-56OcR-d0X8S5lzIPIZ8gTz4oIogg8OmRI7pxjnHCBZ9fAfyQaRd8s4wn6AwTPCgQJcGZFAOYtR25ZHEIdMiVE5DkFdWrvQZpkhvEckSOcOaC0cGqMkOw6UXDBKBgGZYoRggFkyLyHIhI79bqQz9t6FZIjkbwMUbCK4RIGDMEyIyBaUxhBhDoNEwu6RWCnJusEq4YRiRCGubcmQZZNAADI-l4m2V8u5vzlhLDHo805Sc5mwkUIINmIymHjMUOwxFxRuGBm-ENBCFYewg0SicwB5zLksOktg1FsyDpBDpoheF+LGHBLujs0kcUMXJ1hM2UsVUeZIuCcwqqlguVlnYby9l1L6BXGFeWFcDKxHg2lqcklAraLYOlU4JOEqjEthlY0HmV4CVMu2bDNlJQOVsSPIiw1CqVWWGlGi9wVK+nSwcbKqs1qLhErOUwC5KryV2qzBqs1WrXWeNZAaxlCrmUmqrLM2FbFjJWsjRcW1AwHX8nFc6q4S88XusMYS9U7yqBCHxQCxVxKfWkqqsynsQI017XjUEHNXljIDHPHyqNxroaCGZW2uKTqeHNsaGJGK+kEx5tGTQ7tfaqzssbSYfeDAaBPOXdjZuds8aBQUqAAxmItxWNAsuigy6rG1LnvOK4obBABLQZMdSbiVj7gZEeXWobFxeICUU1+TlElRPzik1ppcKEVM-AuWljihFxINMBLgNNbA4qglouCCGRrtnhZ+qW36sK-rLNE5J8hIm4d9ooTmk4QNVL0DUrBOC8FLpXYBl6QQSGdJdN00ivSeF0ePUM1kHaU3jK4zQaZWYB2BkE6wU94n9mFBBvKi40bu1ScBhUCuHHAy3IciWMgtQXkKq07UKwGmNVUi1WEIgPAJDtCJNpoOv0pr5uCfpwz5mJBOB9JULsDb53OVcjwEqMYfKaNkgFfTvdybqUUHBpCkF6bBblPp1ZJ02ZnqdsEl2t6wpmYs1Z8QtQCO5z-X-Ej6T3RQPyZnOBt8ymYthBjFix7OAaPXUhra1m8s7r7oYmDDAot02gvbVruXEus3cCl18WHXbZM-gVojRWuAk2Mvp0jkDclp2jhV+O7tqvmqCH56Mg0GB8bGSwywe30SrS4KJuFQjfgWBIx647gr6u3fYSRzNPCEu5CS6Nz7ynRFg3k1270v22nXS81qk2AgCC-GEE1vg198Yd3bmF9+W5xCwhWIMaH7BYfo4ETYzEdjs2PzliuPH8iMvatWBUHepBxQqxJ2rLyiZyckAR1N+JnO9AP31tMErE3ZNc+p4ZMBm2udlfW7AsXGTkHkallR9dNHGlY5hwx9Z9puJdOM4gtTsIVc47Oiph7VRxn6+EOw1nV22Jm8xhUWOUOYerMYxshznbJHdpt9JteMKIf7zjEwMgRARd9NqYjhHoMhfnwLp3bug2bMaTGJs4JoQIhnvBSsSwR1LC32VvvLGgXmtxbDwnsLt9PQcTTxCjPbCc8+brkIuHdSN06x8SXmPgDS-u3L6n4W6fsELOz+7XPrkVlrvh837RQV5B6M77Vbv7NZ59+sEeoTteMbibH03lrW6CYdcNmFefleIXYLO4P2qw-Qxncb+H0Le+y-sR7xzJfz3OBn7Chf8CfBbvX4n-Ftrs+D8H8F8KAhxj9LAst1ExB2AQwRpj1WB9M393QP8IDWAoCYCV14C2tG5t9b84578U9gDQCM9OBox2A2AEs4C0CBBECDQP8SCBByCsDKD-Z0DEwcD-878u8gCj8M8zcaCsRkCHcccf9t8H4O48CuCFdx9gR6IwRIQ1dAwCCNdSEtdwdnUMZchalv4ywfhKg0QRovddMLgi1MFhRtC8heh9Cnd1l5ASAiA9CG0tUvs8JdCrCvc09XdAcCQCcas2Ivt-dA9g8Bpe9PDVRYYfDvMv5-DYwA8g9QEQ4sF-BVIv5wj10kifdnUGhMhhhQxnxakO5dYkNwsrJSZesUN+tN1wCyBtc70rI9EyjuBhoKjGZLA9EaiL4rJ9N6c4srAECRYtwBhbJf8rB252jJ1O5fg2wYJakf0cJojYigjqpI8z4cYOdOcMYAi4iJIJUljli75nCf5XC-x3DhYQo9i75Cii8Oszjziz4Z8xoODBiKQbiuc0kMieEMYHEdCQgeMZQ2ZUkdwjDVQTDfjRo3jdc2I4w8h0d31yI6FDjLCBALtJoLZ7M5NVQrg7C9D4SdDET2B98kCDAUT9ssS9hSSCSjYvhYxoTKBYTORdiP5YYXC8TWo1ivwdxEc34KMz4twZBqS2w0Q1AyxxRmVmS9CBASt3YC1MCWgSBkI+TyxBTokKTljPhOBiTgCuQ2ShcQTPilxol2AfiFSBSUR7ltTbj4k0kXiLTz5HYVTI9cR1SmBUTY4PloJXJNDjTWRTTflrSbT3YrTzTOdHYikDRvA1CeEVDWMcSLDxT2Br4gSmJqShhaSFQYyjj4ygysR8jOTQksywosicjVlCJnxi8ijQzljCUdwKz4lwz3ilF94nNVI0QRQuiVhSTXwWzO4hg1BxQOzMRTMXNUCWCoJ159ACAezZxMc3Tb8JzHUv1glLBMg7lLAekzhTM20qChAxzP42sRTtk5yM0pZDypzghu0Tz+dFzlyZBVz2N1znUIDBBYwRkpY2yd03TYw48dN4E+wryVy1zxyHzjIdzQNMT7DSQlsQL0FjQaJLAURKoQgHjcsNcjMStMlKkEEKYBh9yCQlsaykLtNxRYY8KEFEpj0wgikSl+J7yeFpBzYFgqAAAvCwECt8-s38hVJc-8u8wCnhYeHgd5CgQZNQdYQBNEjii4ESvzZgJfCA-g9-HdFzDnY2AhaSqcsAozDnT4DTQcZSoMVSsS2Socrc+SwklArc3Sj+FS0SmSqvbBDTYc6A6grSndTckc7cvSqSwyuyywOi6gBi5i0y2g7cei+aZiyyu+XEGpLy5gOiBieQzgAARy7BmC4j6IAoSmCX4sEskHrNq33nMvcowISzYKuNwM63RIwi5PNMKqcr+Da0lNqglxgUKTZO2191cnoLIMwKG2YLquwLKo4N3QB3vGqp1Lcrqpy200arCmaoKTgQj1KTyut2MqKrgKbON3lFN1Wv6vWrayDV8JpSYFIMYN6uXQsqOxNxOy6tOu0wwJMrjQ3MaAsqWyTz0za0MwmpgOM0OvoFqpgKmp0zeouCc3AJ2u+ojMDCfQchDBCELmZDRGKJmHVN+EaX5nWE2EEFhvhu9CJFY2W3GKuEtG1B9UGimHYEyHtLOE+GJoeHwO7RRopscOdUdExuxqJNRsT1CMlXVFJLJs5qpv0Bps1CtB1HvyYGSoWCxqYDhqBQJGZUZsyDGApFrwVoDwFvv1Zq2HZthkVuVuWqCEI1-kIjpkTIMEaIcCsBsB+siJm2NoOxi1sw83EqCQVT61OxYDczFQhJrlchkHBGHPtgfC63UlKL3k6vKKqLGK3HqPDtDHdraP6PUjfIxibM7JYGCEeS93gIlq7Cjj7PAvTpFAoEeUGL3AWltT8qoACsv32vkHS1BqrprqcAJq7NpTxrRHLpYVtVJnYTjm5HGTaOn27gJq1QWGqDICLL6yTSliJ3VFpp1DhklARXcAuwtr-A7o0Cg1qnboRtPJBJVX+Lr2iyaMRVZP9INF3vxsorlzPhqSPssGEHsOoHSkQq1GtDpjGJ1wktVEsDplWD0M2ByMyFvO-t4qhu0gZGnsdUpy3CeHFC1pXs2nNpiyeT3svIVSJpFpJt1GeBcvvtXuwRBDkPoE-sFqxFxAU29HJAoQHOdU2P4GDpcXvR3CiySSlyKTnuUHAvyO3rCkSi4pvJvvIgwpWLMIYfiIGmZTSWcBmvGIYZYsop4r0C1WyuGGEoMuYBAq1RLDIKYbPhw3tujxLtyL+0iidGSp9l2nwsSgUcHCUZ-pME0fUoz10YoCCoEKQr0fIbeGsrUqX1yHHusJpwsbzsmg8cNAsdCUztMdB3MdzqsdPIsfZSsv0pspcewXHqAf4BPocAiepoAYnqnpQ08ucaXzAk-pcuhtyYEFKfSYCeFCCdGJcrLqwiSBMYPiGNSgiE1EJFLrCCRwGdmVSZioydO32pcv0zqf8Z8uaY-k+A6cGL0uiucbipIYMEsdSsRCQzGKosyoVTUaEokANoXVciQwduGllEGY7jFP0KRpFCQ26L9qYADvOZFmxymMGVpTZicg53Ocz0AcnpybIYuYQkRXkGyW+fcAsn0H+cCb0IPl51GDcyeNfDhcaYReztCcSbdFqiXrIXTLxITNSwVSQxOa8aqiKOBtVH+bcZtq1QqZQ3MLw2aICihf5GpfoCNpZcZfXtiwGxQcubPs1WdS-lpXYe33ZblF5XfkMZ5dpnKMlaZfBdFGdpJYuEEfRHJbq3KJnrOC7KSXFEsAACpSAjofVjXQHwHYRDmNH0mQLEpRnynPaXKklpnvKwDPZ8mhbVWuxonDWVgeYUnIqjQTQRBVmiHZDGINmUqRQuIdW+XdnKrQBbXjmBItwGAyALlHmlhMQMZzmpZbVRB2EcES33Hz6DQVVbVOBzd67RB5Aug35RBQAABSJpCt++cZJYdhM6BtptvvRtjtt4FVU+SwaRLoFaBBWhFVYySwbt1qc2qwCdhd6VQQAABgpCHfdAWV+KtqzYkxXOeIQSOlYWmQWlnZracDXsWivcXdLc3b9INBPcz1ey4CXZbsfaxGfYnevbHY-YQUE13bHYb2Xa3beGsH3evPIUpDFaZfYczezauJffkAwDXYADYYOFW+XmXfYEPA7Kif3QAAAWDdrwNxwQPD8s3AXl1B+D-d7fF9ooIAA","body":"function make_register(name) {\n    let contents = \"*unassigned*\";\n    function dispatch(message) {\n        return message === \"get\"\n               ? contents\n               : message === \"set\"\n               ? value => { contents = value; }\n               : error(message, \"unknown request -- make_register\");\n    }\n    return dispatch;\n} "},{"body":"\n\n    The following\n    functions\n    are used to access registers:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":3,"eval":true,"prependLength":453,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0AcwFMKB9AJyYaoGcKn2ACgC2AQzIALKiSYAaUJwasSo4UwCUoAN65QehSyLt6YydKaCARMzaLe-dpfWDFy1RoDcuAL75i5ajpQCgBPAAcLaT52IkpaEk0tAwojegkmUQATQSiKGLi6dQ9QX0JSAvoAGxoaAGsiMNYw9iphQR4Q4QAjGkr5Ggj2UUCSHkTdfTI6PlAAN1FK0ABeUFEeHhoyds6evtABgWH4sa99ZNTQXlZSTKYCc2z5yvUJs7eAflABdhohDu7evJLKRaiQaAB3egHIYjUAAWjhq3WTG6lSYTleb30AC5QOksoIKKIqJVBE91EUfH5yrDqnUGqxKqIukxSUyWZUePJ2ay3GpxmcpqMKHMFsskRstjzKny5KBpSdMZwUsZLjxriRbvcZI8Fi8sR8vuwfkJpbKgTc7g95czWfDEWseCiumiMQazriiSSyXqvKV-BVQGJakwmi1hFRqLNQ0wAB6NO6CONheSmKQybm2zkC-RUAigHLqoV8UQkNjJpPxinaTGC6Yisji4tEsusZOsJ5ECzJynu5UXQSaJYAPlAZFO+m8X05TEu+cLjKzbfjlbC1Z07ubl2FPHFdPqjWlggVmY5y8PWdXFInWP7qsHy1HuR4N5K06dc4LVzsfAE56vOZYlu7DijYHBcPYAgiOI6Zyj+DjnuBDAAa+Zx3vQD4jowLCsEK-BljwLhFKAmJTqyH4bga3y-KuFokKCEL0MmnDrPEwThLOCISs6rq9pOVJlAEbHBqG0JHHQiGJsmqYweYp7kf0gziaMgFjvW+xhHuNQHmGrSCGJIyIQMV6KYcIyKnWwqrP4u4rGIYRJo+QaiCGukRlGMbxm2BBJjJZgZjaHJjLItbumFBnxEZSmaoRPZ8Xo6EFkOo6iGEYSVCErDSBqtzsBl0hKAAVqI8w8GQLRhBQgihWFWIDDJDn5lhPnqPIog2deAkBrCjpUAwJAuBBv7sOaoAbEYZAaDWaGGKqlT2FYvX9ZY8jwX+KhqPI43sJNlK+N1bFLSQSGyoIR1ZcK+QjKpiX4tkXqkuduRXfEnX7TSh2sf1HYLF2-5PZdsTXdoJEzSqaQZPdxKkg9Z1fcdz1A69b3UkJQQiaw52JrkfmwfJnKmTCxzyGEZCqVuRLsDYoE4WtQhpnJEp9cdrgbZEwqdZZMydp5mkrOdPP-rk8VqVZgv+MsNVqqwEUSRWgs9lLnwY7Lx3tomCvxrjjMnhpZnHPqBq4hjzStJGVDRpJPmaymzn+XKCoi4lmGjpRtX6E6bB4UwBGEqIVMsPI4ukIOIvu1k8zkKGpOCKTxFS5Ofqo4GEelpNTRbHH00ezh3u+6T8iw2BecUIRcfXiR-ofejLmhvwfDeTkwrawFuuq1yoAEEyDAk2T2d6FuQqZObQQrPXXt0MPIxN3wIt5l+6qq-+Q8jwkqlcw2k+r6wEt2bXMtKYZ6s+Qn7tnwPW8jC3cqn+f7tt4fBuofozvJf3d96J7uF0PhpeCF3oge6iynpFfwodn7n1TlHDOscybFFvmcbwr4yIznfmcaiQgcagEsF0LIwQmAzERoGLijoeLohFr4KuaN6Dj0ECvYGSRErzT4FYceK1gGr2Iu9ah+CG70PiISAhbAiEMKVLNCGBJYbjwutEJGhR45UMDBjLoQxyASEblghmrcswdwAUArObtRYzFuDMFYKi07qJMVVYWr554LjNBWKx64pZbmfFpekF4OTHh0fjRCR4nFhxfuIpKTlDEfzscXH+Ps-56OcR-d0X8S5lzIPIZ8gTz4oIogg8OmRI7pxjnHCBZ9fAfyQaRd8s4wn6AwTPCgQJcGZFAOYtR25ZHEIdMiVE5DkFdWrvQZpkhvEckSOcOaC0cGqMkOw6UXDBKBgGZYoRggFkyLyHIhI79bqQz9t6FZIjkbwMUbCK4RIGDMEyIyBaUxhBhDoNEwu6RWCnJusEq4YRiRCGubcmQZZNAADI-l4m2V8u5vzlhLDHo805Sc5mwkUIINmIymHjMUOwxFxRuGBm-ENBCFYewg0SicwB5zLksOktg1FsyDpBDpoheF+LGHBLujs0kcUMXJ1hM2UsVUeZIuCcwqqlguVlnYby9l1L6BXGFeWFcDKxHg2lqcklAraLYOlU4JOEqjEthlY0HmV4CVMu2bDNlJQOVsSPIiw1CqVWWGlGi9wVK+nSwcbKqs1qLhErOUwC5KryV2qzBqs1WrXWeNZAaxlCrmUmqrLM2FbFjJWsjRcW1AwHX8nFc6q4S88XusMYS9U7yqBCHxQCxVxKfWkqqsynsQI017XjUEHNXljIDHPHyqNxroaCGZW2uKTqeHNsaGJGK+kEx5tGTQ7tfaqzssbSYfeDAaBPOXdjZuds8aBQUqAAxmItxWNAsuigy6rG1LnvOK4obBABLQZMdSbiVj7gZEeXWobFxeICUU1+TlElRPzik1ppcKEVM-AuWljihFxINMBLgNNbA4qglouCCGRrtnhZ+qW36sK-rLNE5J8hIm4d9ooTmk4QNVL0DUrBOC8FLpXYBl6QQSGdJdN00ivSeF0ePUM1kHaU3jK4zQaZWYB2BkE6wU94n9mFBBvKi40bu1ScBhUCuHHAy3IciWMgtQXkKq07UKwGmNVUi1WEIgPAJDtCJNpoOv0pr5uCfpwz5mJBOB9JULsDb53OVcjwEqMYfKaNkgFfTvdybqUUHBpCkF6bBblPp1ZJ02ZnqdsEl2t6wpmYs1Z8QtQCO5z-X-Ej6T3RQPyZnOBt8ymYthBjFix7OAaPXUhra1m8s7r7oYmDDAot02gvbVruXEus3cCl18WHXbZM-gVojRWuAk2Mvp0jkDclp2jhV+O7tqvmqCH56Mg0GB8bGSwywe30SrS4KJuFQjfgWBIx647gr6u3fYSRzNPCEu5CS6Nz7ynRFg3k1270v22nXS81qk2AgCC-GEE1vg198Yd3bmF9+W5xCwhWIMaH7BYfo4ETYzEdjs2PzliuPH8iMvatWBUHepBxQqxJ2rLyiZyckAR1N+JnO9AP31tMErE3ZNc+p4ZMBm2udlfW7AsXGTkHkallR9dNHGlY5hwx9Z9puJdOM4gtTsIVc47Oiph7VRxn6+EOw1nV22Jm8xhUWOUOYerMYxshznbJHdpt9JteMKIf7zjEwMgRARd9NqYjhHoMhfnwLp3bug2bMaTGJs4JoQIhnvBSsSwR1LC32VvvLGgXmtxbDwnsLt9PQcTTxCjPbCc8+brkIuHdSN06x8SXmPgDS-u3L6n4W6fsELOz+7XPrkVlrvh837RQV5B6M77Vbv7NZ59+sEeoTteMbibH03lrW6CYdcNmFefleIXYLO4P2qw-Qxncb+H0Le+y-sR7xzJfz3OBn7Chf8CfBbvX4n-Ftrs+D8H8F8KAhxj9LAst1ExB2AQwRpj1WB9M393QP8IDWAoCYCV14C2tG5t9b84578U9gDQCM9OBox2A2AEs4C0CBBECDQP8SCBByCsDKD-Z0DEwcD-878u8gCj8M8zcaCsRkCHcccf9t8H4O48CuCFdx9gR6IwRIQ1dAwCCNdSEtdwdnUMZchalv4ywfhKg0QRovddMLgi1MFhRtC8heh9Cnd1l5ASAiA9CG0tUvs8JdCrCvc09XdAcCQCcas2Ivt-dA9g8Bpe9PDVRYYfDvMv5-DYwA8g9QEQ4sF-BVIv5wj10kifdnUGhMhhhQxnxakO5dYkNwsrJSZesUN+tN1wCyBtc70rI9EyjuBhoKjGZLA9EaiL4rJ9N6c4srAECRYtwBhbJf8rB252jJ1O5fg2wYJakf0cJojYigjqpI8z4cYOdOcMYAi4iJIJUljli75nCf5XC-x3DhYQo9i75Cii8Oszjziz4Z8xoODBiKQbiuc0kMieEMYHEdCQgeMZQ2ZUkdwjDVQTDfjRo3jdc2I4w8h0d31yI6FDjLCBALtJoLZ7M5NVQrg7C9D4SdDET2B98kCDAUT9ssS9hSSCSjYvhYxoTKBYTORdiP5YYXC8TWo1ivwdxEc34KMz4twZBqS2w0Q1AyxxRmVmS9CBASt3YC1MCWgSBkI+TyxBTokKTljPhOBiTgCuQ2ShcQTPilxol2AfiFSBSUR7ltTbj4k0kXiLTz5HYVTI9cR1SmBUTY4PloJXJNDjTWRTTflrSbT3YrTzTOdHYikDRvA1CeEVDWMcSLDxT2Br4gSmJqShhaSFQYyjj4ygysR8jOTQksywosicjVlCJnxi8ijQzljCUdwKz4lwz3ilF94nNVI0QRQuiVhSTXwWzO4hg1BxQOzMRTMXNUCWCoJ159ACAezZxMc3Tb8JzHUv1glLBMg7lLAekzhTM20qChAxzP42sRTtk5yM0pZDypzghu0Tz+dFzlyZBVz2N1znUIDBBYwRkpY2yd03TYw48dN4E+wryVy1zxyHzjIdzQNMT7DSQlsQL0FjQaJLAURKoQgHjcsNcjMStMlKkEEKYBh9yCQlsaykLtNxRYY8KEFEpj0wgikSl+J7yeFpBzYFgqAAAvCwECt8-s38hVJc-8u8wCnhYeHgd5CgQZNQdYQBNEjii4ESvzZgJfCA-g9-HdFzDnY2AhaSqcsAozDnT4DTQcZSoMVSsS2Socrc+SwklArc3Sj+FS0SmSqvbBDTYc6A6grSndTckc7cvSqSwyuyywOi6gBi5i0y2g7cei+aZiyyu+XEGpLy5gOiBieQzgAARy7BmC4j6IAoSmCX4sEskHrNq33nMvcowISzYKuNwM63RIwi5PNMKqcr+Da0lNqglxgUKTZO2191cnoLIMwKG2YLquwLKo4N3QB3vGqp1Lcrqpy200arCmaoKTgQj1KTyut2MqKrgKbON3lFN1Wv6vWrayDV8JpSYFIMYN6uXQsqOxNxOy6tOu0wwJMrjQ3MaAsqWyTz0za0MwmpgOM0OvoFqpgKmp0zeouCc3AJ2u+ojIbM6vKKTUxC7KSXFEsAACpSAjofUkbbyaLAxsrhhhKDLmAQLEoYr1KM8bAgqBDRZf4eBPL8aSaT8WBybDQeZQlKa8NxQeZ2UrKjQTQRBaa4q5D6AkqUqRQuI6sUMxiqLMqFUcahKJBlqggn0HIQwQhC5mQ0RiiZh1TfhGl+Z1hNhBBlbVbvQiRWNltxirhLRtQfVBoph2BMh7SzhPhLaHh8Du0ta7bHDnVHR9bDaiTtbE9QjJV1RSSbb-aHb9AnbNQrQdR78mBkqFgDamAVagUCRmV3bMgxgKRa806A8w779vathfbYZ07M75aF1XIZBwRhz7YHwut1JSi95obGiHBDNqj+j1J6jG7Qw+tWju4xitw3yMYmzOyWBghHkvd4C46uwo4+zwKR6RQKBHlBi9wFpbU-KqAArL99r5B0tQb17N6nAzauzaUTa0QV6WFbVSZ2E45uRxk2jp9u4zatUFhqgyAiy+tYb3Qid1RnadQ4ZJQEV3ALtm6-xT6NAoNaoT61bTyQSVV-i69osmjEVWT-SDQoHTbKK5cz4al4HLBhB7DqB0pEKtRrQ6YxidcJLVRLA6ZVg9DNgcjMhMbqLeLAxFbEGW7P7oN1InhxQC7AHNoDAQHYDoHLyFULao6rbdRngXKcGgHsEQQBbBGYs3RIqU6oZvRyQKEBznVNj+Ba6XF70dwoskkpcilv7lBwL8iIGwpEouKbzMHyIMKVizDdH4iBpmU0lnAZrxjdGWLKKeK9AtUZa8abLxKDQtUSwyD9Gz4cMqbYEHlci-tIonRkqfZdp8LEpfHBx-HKGTBaal9ImKBGbHakKonw6sRrK1Kl9cgX7rCacUnp7JpimI6xo46WbF7EnQdkmp60nTyUnObVHial8X76H+B2HnKP5PgRm36xm6YabQml8wIyGXK2G5muahmfKam9CD5edRhmm9BPhl6sIkgOmD4hjUoIhNRCQl6wgkdbnZl1n8mfKECXL9N5mqmfLRiXLTnBi9Loq+b5HZDGIDBUnUrEQkMJbKrQBgm5aISa5XIkMDsYtZQ7mO4xT9CNaRQkNuiK6mAq7EWRZscpjBlaU2YnIOdEXM86GZnu7xbnBSXHV5BskGWRKRZKWtmZRRjnAnjXx2XhRamJ6GnemVGwp-6yF0y8SEzUsFUkMy7SmqoijgbVRKXCmfrvMlmUNzC8NmiAoWWwmpaLhCM4mNWhGdXkMhHZQUYInaZNWTHt89XbMPN9XWmJ5ZtCITWYszXgHkXEVHXPNxs-z7G4X6AjXtW6ZEylGmjrAGbPaPsZs4m6Y-XnXEoe7PY3MxUBItwGAyALlsWlhMQMZEWpZbVRB2EcEy2imUGDQVVbVOBzcd7RB5Aug35RBQAABSJpKt++cZJYdhM6JtltvvZtrtt4FVU+SwaRLoFaBBWhFVYySwXt1qQRqwKdpd6VQQAABgpBHfdAWV+KsGzYuWvPIR3YNCOlYWmQWnnbracGAcWlveXfLe3b9LPfhnvbvafdPaxHPfLY-cra-beEE33YnYb1XYA70GsBzYkxXM6i-lpRMcPersqNLfkAwA3YADZKQ4PbXCt3WoPt9f3QAAAWLdrwQpwQRD8s3AD14aLV32Sjq4zPDVIAA","body":"function get_contents(register) {\n    return register(\"get\");\n}\nfunction set_contents(register, value) {\n    return register(\"set\")(value);\n} "}]},{"tag":"SUBHEADING","id":"#h2","child":[{"body":"The stack","tag":"#text"}]},{"tag":"TEXT","id":"#p4","child":[{"body":"\n    We can also represent a stack as a\n    function\n    with local state.  The\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_stack"},{"body":"\n    creates a stack whose local state consists\n    of a list of the items on the stack.  A stack accepts requests to\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"push"},{"body":" an item onto the stack, to\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pop"},{"body":" the top item off the stack\n    and return it, and to\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"initialize"},{"body":" the stack to empty.\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":4,"eval":true,"prependLength":0,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0AWwEMBrAUwH0BnCpslgBQBKUAG9coSaAA2bCqB58WoALygSRadIDcEqcXLU6oAA5EuACwEAPEaNB6pUxf1WmmVAE42ANAt78QtoOTk6eckSe9ABEACZ0bNG6TgC+jqAGlLT0JjQmwmLpTlQEoAJUXBwaWgIuLEJ2RaGSbJ6eNN7RbAwmFACe-kqgALTDpnnRQU2SKaBs0lxshc3NZHQ8oBR5bhZsTLG1AfXJK051brxU0odKU6dhEVGbeSfNaanpmUb0VCRU1ExpFQAF5sAriU7nNTVHTTUDhCiRGLxEiJV6gd76UhZYyxComJgUMhWBhsLhcJgAczYjVOCKRjDJFOpqhUamiZks0ThKwA-KZzBYec0AFyM8lUpZs9m5Ezc+7Nfmy4TC0Ji0kSlnS0DRX7-KiAkGJVVOfl6gFA0EqhVquZtDoCDXMth+aKkFgkGgAd3o4QAjkQyfJRoN+JN0ZjJPSnniuASiRZdCkgA","body":"function make_stack() {\n    let stack = null;\n    function push(x) { \n        stack = pair(x, stack); \n        return \"done\";\n    }\n    function pop() {\n        if (is_null(stack)) {\n            error(\"empty stack -- pop\");\n        } else {\n            const top = head(stack);\n            stack = tail(stack);\n            return top;\n        }\n    }\n    function initialize() {\n        stack = null;\n        return \"done\";\n    }\n    function dispatch(message) {\n        return message === \"push\"\n               ? push\n               : message === \"pop\"\n               ? pop()\n               : message === \"initialize\"\n               ? initialize()\n               : error(message, \"unknown request -- stack\");\n    }\n    return dispatch;\n} "},{"body":"\n\n    The following\n    functions\n    are used to access stacks:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":5,"eval":true,"prependLength":453,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0AcwFMKB9AJyYaoGcKn2ACgC2AQzIALKiSYAaUJwasSo4UwCUoAN65QehSyLt6YydKaCARMzaLe-dpfWDFy1RoDcuAL75i5ajpQCgBPAAcLaT52IkpaEk0tAwojegkmUQATQSiKGLi6dQ9QX0JSAvoAGxoaAGsiMNYw9iphQR4Q4QAjGkr5Ggj2UUCSHkTdfTI6PlAAN1FK0ABeUFEeHhoyds6evtABgWH4sa99ZNTQXlZSTKYCc2z5yvUJs7eAflABdhohDu7evJLKRaiQaAB3egHIYjUAAWjhq3WTG6lSYTleb30AC5QOksoIKKIqJVBE91EUfH5yrDqnUGqxKqIukxSUyWZUePJ2ay3GpxmcpqMKHMFsskRstjzKny5KBpSdMZwUsZLjxriRbvcZI8Fi8sR8vuwfkJpbKgTc7g95czWfDEWseCiumiMQazriiSSyXqvKV-BVQGJakwmi1hFRqLNQ0wAB6NO6CONheSmKQybm2zkC-RUAigHLqoV8UQkNjJpPxinaTGC6Yisji4tEsusZOsJ5ECzJynu5UXQSaJYAPlAZFO+m8X05TEu+cLjKzbfjlbC1Z07ubl2FPHFdPqjWlggVmY5y8PWdXFInWP7qsHy1HuR4N5K06dc4LVzsfAE56vOZYlu7DijYHBcPYAgiOI6Zyj+DjnuBDAAa+Zx3vQD4jowLCsEK-BljwLhFKAmJTqyH4bga3y-KuFokKCEL0MmnDrPEwThLOCISs6rq9pOVJlAEbHBqG0JHHQiGJsmqYweYp7kf0gziaMgFjvW+xhHuNQHmGrSCGJIyIQMV6KYcIyKnWwqrP4u4rGIYRJo+QaiCGukRlGMbxm2BBJjJZgZjaHJjLItbumFBnxEZSmaoRPZ8Xo6EFkOo6iGEYSVCErDSBqtzsBl0hKAAVqI8w8GQLRhBQgihWFWIDDJDn5lhPnqPIog2deAkBrCjpUAwJAuBBv7sOaoAbEYZAaDWaGGKqlT2FYvX9ZY8jwX+KhqPI43sJNlK+N1bFLSQSGyoIR1ZcK+QjKpiX4tkXqkuduRXfEnX7TSh2sf1HYLF2-5PZdsTXdoJEzSqaQZPdxKkg9Z1fcdz1A69b3UkJQQiaw52JrkfmwfJnKmTCxzyGEZCqVuRLsDYoE4WtQhpnJEp9cdrgbZEwqdZZMydp5mkrOdPP-rk8VqVZgv+MsNVqqwEUSRWgs9lLnwY7Lx3tomCvxrjjMnhpZnHPqBq4hjzStJGVDRpJPmaymzn+XKCoi4lmGjpRtX6E6bB4UwBGEqIVMsPI4ukIOIvu1k8zkKGpOCKTxFS5Ofqo4GEelpNTRbHH00ezh3u+6T8iw2BecUIRcfXiR-ofejLmhvwfDeTkwrawFuuq1yoAEEyDAk2T2d6FuQqZObQQrPXXt0MPIxN3wIt5l+6qq-+Q8jwkqlcw2k+r6wEt2bXMtKYZ6s+Qn7tnwPW8jC3cqn+f7tt4fBuofozvJf3d96J7uF0PhpeCF3oge6iynpFfwodn7n1TlHDOscybFFvmcbwr4yIznfmcaiQgcagEsF0LIwQmAzERoGLijoeLohFr4KuaN6Dj0ECvYGSRErzT4FYceK1gGr2Iu9ah+CG70PiISAhbAiEMKVLNCGBJYbjwutEJGhR45UMDBjLoQxyASEblghmrcswdwAUArObtRYzFuDMFYKi07qJMVVYWr554LjNBWKx64pZbmfFpekF4OTHh0fjRCR4nFhxfuIpKTlDEfzscXH+Ps-56OcR-d0X8S5lzIPIZ8gTz4oIogg8OmRI7pxjnHCBZ9fAfyQaRd8s4wn6AwTPCgQJcGZFAOYtR25ZHEIdMiVE5DkFdWrvQZpkhvEckSOcOaC0cGqMkOw6UXDBKBgGZYoRggFkyLyHIhI79bqQz9t6FZIjkbwMUbCK4RIGDMEyIyBaUxhBhDoNEwu6RWCnJusEq4YRiRCGubcmQZZNAADI-l4m2V8u5vzlhLDHo805Sc5mwkUIINmIymHjMUOwxFxRuGBm-ENBCFYewg0SicwB5zLksOktg1FsyDpBDpoheF+LGHBLujs0kcUMXJ1hM2UsVUeZIuCcwqqlguVlnYby9l1L6BXGFeWFcDKxHg2lqcklAraLYOlU4JOEqjEthlY0HmV4CVMu2bDNlJQOVsSPIiw1CqVWWGlGi9wVK+nSwcbKqs1qLhErOUwC5KryV2qzBqs1WrXWeNZAaxlCrmUmqrLM2FbFjJWsjRcW1AwHX8nFc6q4S88XusMYS9U7yqBCHxQCxVxKfWkqqsynsQI017XjUEHNXljIDHPHyqNxroaCGZW2uKTqeHNsaGJGK+kEx5tGTQ7tfaqzssbSYfeDAaBPOXdjZuds8aBQUqAAxmItxWNAsuigy6rG1LnvOK4obBABLQZMdSbiVj7gZEeXWobFxeICUU1+TlElRPzik1ppcKEVM-AuWljihFxINMBLgNNbA4qglouCCGRrtnhZ+qW36sK-rLNE5J8hIm4d9ooTmk4QNVL0DUrBOC8FLpXYBl6QQSGdJdN00ivSeF0ePUM1kHaU3jK4zQaZWYB2BkE6wU94n9mFBBvKi40bu1ScBhUCuHGlH7x4CVGMPlNGyQCiWMgtRe7k3UooODSFIL0z03KAztRVknTZmep2wSXa3rCmEIgPAJDtCJIZgjuc-1-xI+k90UD8mZzgbfMpmLYQYxYsezgGj11Ia2r5ozO6+6GJgwwczdNoL21S+IOzuQHPuCc6+LDrtsmfwC0RoLXASbGVs6RyBuS07Rwi-Hd20XzVBE09GQaDA+NjJYZYfr6JVpcFE3CoRvwLAkY9SNwV8W5vsJI5mnhtn7OszK1t6TGz81Gskd2vbynroNvnc5VygwCC-GEElvg198Yd3bsZ9+W5xCwhWDdu7mMKhntsRexej85Yrk+8jNz2rVgVB3qQcUKsQdqy8omcHdAnvVfiZjvQD99bTBC5V2TWPoeGTAV1rHYWOuwLJxk5B5GpZUfXTRxpP32DCAY+s+03EukavY0ctiLO2io4O5O+U4yBfsKF9N-nAhbus7+9PAXqzGMHbk6qBT3pFf7ZRpdjGcYmBkCICTvptTntPdBkT8+BdO7d0K35jSYxNnBNCBEM94KViWCOpYW+yt95Yx08l6zpv7fGdvp6DiruIXu7Yd7q7dchEPbqRunWPjg-W8ASH92YeXfCzd9ghZXv3Y+9cistdj2k-aKCvIPRGfapZ-ZrPXP1gj1CZjxjcTpfE8pa3QTDLhswp14jxC7B42C+1SL6GcbCeze2Zr-39i2eOaN5W5wUfYVx-gT4HNqf5ebNpdn+6AfOfI-YI8151gYh2AhhGse1gtnV-unX6f9RF+r8rtv2lxuXeZ+99D-P+vFAhwh9LBOBox2A2Atsb8X8BB78DR18QCBBwCP9ID-ZX9Ewv898f9M8-9B93dxdW995FcO8zcH4O445f8Gcy9gR6IwRIR2dAxndOIOknRucLstUMZchalv4ywfhKg0QRotdHcFUi1MFhQuC8heg+Cld1l5ASAiBeCG0tUSs8IeDJD9tXdDtO0CQbEqRFDRC9cDcjcBoc8NCLhYZtCYs2Iv4St9DDdQEQ4sF-BVIv4zD11HCYUtUGhMhhhQxnxakO5dYkMTMrJSZcsUN8tN1LBSYecN408csVgwI8su9LA9Foi70rJbN4drMrA78RYtwBhbId8rB25UiEpglZc2wYJakf0cJrDYx9dbCJIwEMdMccZmj4ldc6iDC7DqFqoLd4klCf4VC-w1DhYQo+iP4AjA8Msxjxjz5q8xoMD8iKQZisc0l3DnUMYHFuCQgeMZQ2ZUkdwXkhCPldjRo1i1NYQ4w8hPt31yI6FBiJCBBJtJoLYpoTDVQrhZDeD7juDHj2A+8H8DAXiBsvi9hQSASjYvhYxrjKBbjORej4lYZlC-jWo2i-Dns34KMz4twZBoS2w0Q1AyxxRmVkTeCBAQt3YC138WgSBkJcTywCTokIS+jPhOBgT-8uQ2iidhDoJXIti8gdj6T8SUR7kuTZiWjDiVjxS75HZmSLdcQ2SmBXjY4Tj2DhQEUrjhTCSACpTpSz40ldS9S3hHYikDRvBWDnVSEukfjxCyT2Br4jiLgrihhYSFQbShj7SxSDR0Tu8HcsIsTxjPDvDVlCJnwg9AjTS+jCUdxIz4lzT1ieEMZbMHxDE0QRQMiVhQTXw0zO4hg1BxQszMQtUn9z8UCoJ159ACA8zZxvsTjv8qzHUv1glLBMg7lLAekzhiy20oChAKzP40tiTtkGyM0pZhyazghu0xz8dmzWyZB2z2NOznUn9BBYwRkpYMyd0TjYxbdahqc3hEoWy2yOzKylzjI+zQNPi5DSRmtzz0FjQaJLAURKoQgFiitOdbkwgSi3hMlKkEEKYBhByCRmtYzXzDNxRYZgKEFEpj0wgikSl+JFyeFpBzYFgqAAAvCwc8jcwsvsGco8hck8nhYeHgd5CgQZNQdYQBN4zDYJCizTZgRvJ-GAsfHdTzCQDHY2AheimsoAj85itfHdM8jioMLiqixiti0sy-aAjHT4EsnswcYSuisS4-SI7sssxwGSwSxoeSuUg-ESyihilS5C6gVCjC-iwE4yqgUyzC4SmpJS5gOiBiWgzgAARy7BmC4hyOPNKIVWItIskATPU2uwkp7Lfy2zQKmO-13TBgHExLFLkvUp8yKwpNqgpxgUKTaJ6zYP3ngLAPfyKzf1CoioK1AvS2iqCQVVcwDNqg-MkqvySsMxSrCjSoKTgXN1KUCthASqkuv2XWTOGyqDFxCvUrCrSyDQsJpSYFAMQIKuQJ6pTJF1tVypmsM0KvUvGt63oFqvkua0EIuGTNUu0vWoUKXOGvmt2vePoAOu6qvx5z5xrlcjyyTUxBzKSXFEsAACpSAjofUPr5zELAw-LhhyLRLmBzzEp7KeL3cbBzLYDRZf4eBFLQaobh8WBYasRPgeZQl4a8NxQeZ2UP5cQ7LkbHKaD6BXL3KRQuI4sUMvz4KfKLggayKJBOqLVtIGhBAQwQhC5mQ0QgiZg2TfhGl+Z1hNhOamBuaJzvQiRWMWsRcrhLRtQfVBoph2BMhdL9BPhFaHhf9YZBa1aTqeFHQxaubnihaHdLrpZQSVbzaNa9AtbNQrQdRyC3KFhxbJbmVmV9bMgxgKQY8vb9dbbf9jathTapbSRvbfbWaghCMEbBtLNHTVQ8trA0bDbAwcM466Yg5fpqKYqk6wixtU6fRKguwLTEz94ZBwRSz7YUy911IQi95HqC6ojcj1I9FMim7uBhorAUjW70iBzG6J80tBxsyWBghHl9tb8mA3KfZJoCyrzR6RQKBHl8i9wFpbVLLrL8rDN2FXMDrN75ozKKQRYczaUZa0Q16WFbUojjNuRxkUiq9u45atUFhqgyBgynrHVIc7EFbHalbsgQ6EV3BJsu6EJz6NAoNaoz7ebxyeSVV9jY8LNu7EVUSjSDRoHZa4K6cz4akEHLBhA5DqB0oXytRrQ6YvzEEaKFVgCUNVheDNhvDMh-qELCLAwn1GhP7+RIctwnhxRAGEGMG+amyFVf7SGdRi67bDRcHgHsEQQyaDBQHoDJGPQgVjtvRyQKEiznUbD+Ba7Nx70dxzMkkqcikf71Rra0lbyKqLhDy5ysHyJfz9S9DOiGjjowFmVLGR6oLgkdHMK4KCK9AtUmaQaDLc6DQtUSwwC9H3YM68NYEHkfCztIonQZ6o4mqRdfGvH3R6b9zaLkbG9ImKB0bDRCmFLCb9LuLG9chX6pCYcUmuwo5imzhPgUnsbl7Em2lDJ6nZ7xyUmCa75OLQnG9X6GH+AkGHAmnNa6G36P6UMkahmVKEjabNL2HxmBB5nKmjLhQanijNLV7-Tx7RIwgCjUoIhNRCQV7jnFITgzVynIaCmxrNLbMNnlKgDdmP5Ph2mD5EbynibQnSbGIDAZ6PLEQkM6bVd6BgmWaLjhJ94kN47hpZQXsrn4aPT+aRQkMO7QxK7q7YIsnKzfgKjBlaU2YnIMd4WPd6H36xnyHnASXHV5Bsl6WKKRYKXqneCD5cdRgnAx0LJ9A2XtmOXJ7unGnJG4ZmDWN3S-iHTnMFUkNo6rrKYqpAi9rVQKXCm7rLslnFGRpjGu9mWwmGbVRY64ntXLNwjGYDWUYInaYUMxC4n9W7WEHeV35YnfYzXu7HWdXZRWpRQS7PAIXsFZz0QFWtKGrdzVXFWisrA+K06uq2Lw3s7-XE6o3DMY22KeWxUBItwGAyALlMWlhMQMZ4WpZbVRB2EcEK2inUGDQVUlqURd7RB5Aug35RBQAABSJpGt++cZJYRt5t1t3PFt7t40haU+SwaRLoFaBBWhFVYySwPt31+FSt316VQQAABmPsNKxAWV2KsFzYuWDacBHdC3hlYWmQWnnc4GECcBAcWlvYUasCna3YQSOnvbvZXZPYNDfcrY-era-axEEz3Ynfj2fYA-0GsDzYkzbM6i-lpWMYPdxcZg93YQwHXYADZKQ4O7WEOoOkip35AAAWTdrwUpxDiM3AD1hCXD-NqYlDooIAA","body":"function pop(stack) {\n    return stack(\"pop\");\n}\nfunction push(stack, value) {\n    return stack(\"push\")(value);\n} "}]},{"tag":"SUBHEADING","id":"#h3","child":[{"body":"The basic machine","tag":"#text"}]},{"tag":"TEXT","id":"#p5","child":[{"body":"\n    The\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_new_machine"},{"body":"function,\n    shown in figure ","tag":"#text"},{"tag":"REF","body":"5.13","href":"/sicpjs/5.2.1#fig-5.13"},{"body":", constructs an\n    object whose local state consists of a stack, an initially empty instruction\n    sequence, a list of operations that initially contains an operation to \n    \n    initialize the stack, and a \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"register table","tag":"#text"}]},{"body":" that initially contains two\n    registers, named\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"flag"},{"body":" and\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":"\n    (for \"program counter\"). The internal\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"allocate_register"},{"body":"\n    adds new entries to the register table, and the internal\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"lookup_register"},{"body":"\n    looks up registers in the table.\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p6","child":[{"body":"\n    The ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"flag"},{"body":" register is used to control branching\n    in the simulated machine.\n    Our ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"test"},{"body":"\n    instructions set the contents of\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"flag"},{"body":" to the result of the test (true or false).\n    Our ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"branch"},{"body":"\n    instructions decide whether or not to branch by examining the contents of\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"flag"},{"body":".\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p7","child":[{"body":"\n    The ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":" register determines the sequencing of\n    instructions as the machine runs.  This sequencing is implemented by the\n    internal\n    function","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"execute"},{"body":".\n    In the simulation model, each machine instruction is a data structure\n    that includes a\n    function\n    of no arguments, called the \n    ","tag":"#text"},{"tag":"EM","child":[{"body":"instruction execution function","tag":"#text"}]},{"body":",\n    such that calling this\n    function\n    simulates executing the instruction.  As the simulation runs,\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":" points to the place in the instruction\n    sequence beginning with the next instruction to be executed.  \n    The function ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"execute"},{"body":"\n    gets that instruction, executes it by calling the instruction execution\n    function,\n    and repeats this cycle until there are no more instructions to execute\n    (i.e., until ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":" points to the end of the\n    instruction sequence).\n    ","tag":"#text"},{"tag":"FIGURE","snippet":{"tag":"SNIPPET","latex":false,"id":6,"eval":true,"prependLength":405,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0AWwEMBrAUwH0BnCpslgBQBKUAG9coSaAA2bCqB58WoALygSRadIDcEqbPkEATkwZtV6zTr2Ti5anVAAHIlwAWHZkfZHhYm1K2JmYWTkxUvor8ADSgxqZsQrqBgUZyREb0AEQAJnRsWclSAL4BdpS09E40Tp5M3my+IuIpUlHKam5sTDkC8WZJAYH95mq8VNJ9wYlFrWkUGdl5JAWzoKXDpBWOLu4CAB7NoENtvPyh4b77se1Jx62S84ugufmFARtS5Q5VNX4tDyoBFAAioXA4Gi0AluzROrUaRhoviybAYTgoAE8FGdlABaXHOGpZQYPdagNjSLjmAGkyRkOg8UAUGoWLo9aE4km0yTtCzjSa3Nakp6ZJk1IUlD5lLY-UBUEhUahMaRUABebH+cOxSgskOswvSoteK3egU+thllVAOTBYQoZDcAjMXC4TAA5ol-AaFqLna6PaoVGosrs3FktQ8APzOVxuCOtABcjDYLvdoyDL2qTnD3JS0azwnjKSTfrTgeDobqDSMOdzUnzsarPkLdakJZT-vTFZqTcatdb+Z7XmbQiLgXbqYDQeD8sVVGVaoKY-rcoVSpV6pbrdASYRSKdHbTsSypBYJBoAHd6GkAI5EFPyfHa-jEtbm0Ai+g2rh2h26UqEJajjMOwHCVsOjQcMy3A4hwbAEE6fBuPKbA3DisROGQsKpIa9B+CoAB8XrboE4H1M2grLq0PQAG5MOQnCYQImFciRxT-oB9hWiBnBpDRjQUDBShQTQvZGHBCHMA6KFoUoGFYcRjy4SCIiEYpJGErUEGRJyEqtrR9FkIxZDMVh2j3Bp7G4AB3xWmR1YiUJ-D-B+ykqjwAgho22mOe0r7rJx2zXmw-FGIJ7SOdpLmfjIYIUJ5fECU5LCReRfZ3DZQG-FpaU6Uo2FSDF7SeVmYmvtZgWyvZFGcupRU4iV3m5eVmVccBrC8WwbpxY0AgkAkBWSAYoD0iQFBsGNXAWFkABUpBMC6VBuisOQzaaXxZdatpMPajqlh6g0pDF+1di8HoUP2dbRqN42TVRO7JpOp1ZFSF33dGdHSPeqhEaII10LdFBTWon33uZ765ruRiIr4J3Hqe55Xq5d4PqAT48RwaTdTw6VvgEMXfr+bgcZVVrSDQNAsEQTgCOwGKxLwABGsiHaNjJpPSRg5BYC1cDQJl0wz4STEzLOsa5Pr0GCHCkDk8Eob0HNIjko65tGsvyytRZJvyAhK1zgylLZji8-ztNsPTrmczkXCHTF0t6nrbDW7bRbqyQcsEAr2vkneyrm5bbK9EHTsu0I4du6AIf6zbqvckmpsCxbQsTKHyu24b+DG-Q50cDdE1A072PjUYdvKVjPXIudLWk44r15wDBdcEXlexKDno0hLzwVzjyKvcSAjt5ntf0Bj8oeePgk3YiWiQZPRhEEFZeS84lygiQPAN2NM+yOJ8+Lz8sR6pn2erpv080LPe8bxQC9BevPDL88IeTyfm2T3B+zO0QPwcHYD8UCfqKXWr8OKn3rh-NgX8yA-0qH-UgADYh2EOvXEBN8kGkGHqfXOPcS6IWkisWIWMIQDTqspKSyEVieRwV1SuA9iH9QGCTU+mInAan3kvMQXdRQvxvnfH4GUs6bXJpTamYEjBUAYNCDEDBGaX1iDURoO1Ki23UmzeQn0eYujNlwGRcjpAKLYSYH4ts1j23BBrL2K1B7KjjrSaMe5Ih6PkS8BGl56CKOMVaJ8vNUTMwKHY0kSYQ660+uHZhwiKZU1qNIJgjMKQCFifEyksQkkUhIQMNRDINHKi0XzEyaTpAZNQjIOJFJTH42UtLSxCsbHSECVGck0N9yFOKfDD2ms2Dc0KWjAkvjZGyGJD7UJtiIltVHh1cRki5z8U-rUeCAgoFOFiBQmSpTkmqM7kCEE0t1H0UEksxZ+wnDh3UoEdRI0LB7LGnMjg7cjknL0twvCqkiJkDfOSSk5htmgnBK0w5SzTmd3Odks+QMLAiOiRwQpiSykpPWekpZ0K4UPPCVqGK+EiKTy4B88p3zgS-MxrQ3uczUWHRBTfD8FgaHF16qswhrlaXiSRVjMlTyMWvNALnfOk09Z3A+J8qkZypCOIee0s87jyTHLSItRwrDzA+JdH4wZ4tSitSCowSZnjlF0FuQspZKykJrMKVwQxSiTGs1BSyNQkKxFOAkVI7Vv8kV-EBWarxDJxYXKYHYYGmqaajCIhje10zqCzKRfqw1BCSkmqENEe6DwnVwJdUY+iNs2WVJXpi0ATAnBOGkBiDg8oZYdKMAW+UboOAACsmB0S4GQCR6IBAJpSDUQ1NNgRqQQnGnNvq0XqtlLzJaJAW4ksYSUvmGQjJAPoO5eKWQh3LSyEQ4lJc2kKBoFOmYFVT6LpIESyt46BB7qLXwg+lQZ1R26L0XWJ6OECLfuMnNi1lp3OVPeUld6z2cL+pm5+16BC61vS+-d96L39qEU+jGJ6FmTyjZQmNcLTWgCTQyeSlrKW8CMOdalcgD2V3wQh2IJ6GEJAAWiiljJ25zLycOt9X1OCHNAQEC51G7CqC1NLVD+7DnUcBVqaMGNuN6oQnx458HjVIfdTqjeDS2yatAiGhgMzGPHIknUj9BrNXRtSUh8WHKfrCtpPXHlhcsPnTbu+zg-8KPbgMgxMCJkWLmSLFZAdVp7NGUc6ZFBeHTPN0winSY3LG68pYuE447n2qgXGpvWD6DtNEYRfC7jyGCCxLdOhrJlLRo2llGMB8W88uVHI2sH5XHU3OuOQIXLc46BAq1Bc2rv92NqCE5V5NamFkto0v9D2dWSASYZT1jSJrpMWvZcpbNwLtwmdC4XdL7pYjNbgTZ8WJFPPGR8y5tiuKvlGaaTDRBLxGY9CZKjMDjhFVUgGQEvGUX6Cxfiit+rXCYpzs8k95dfXiv1fBiPc7586C-ZHU909PB+EXrISvEJwtAOFcuyQCLFUAcY0ZiYcgHh4s8CG4hjZSCMtZc7hcuWjI1Do8Mh4Un8VmOBHK38uFpLqcNdJBc7FEKoliJhWN5LtyYXM-W4VKbnKZuth+SFsaTc+gZZZ71lIc3JdhbILEbFgvWzFEFdSEbgRNveecyNiG3IrJmk1wd0VcGTtnYp5jsFkOrt9KVbd8qZoUen2tw6WFySjjvbip5d3YZdNe-+27jHDoODU4EP78Ht9z2vc7jFWHqco+I+Rw9uU4JeBug9DkaFvv6RonyGNBmXQoLukvdLMIEQas0ALysMaIgABkDer3snz9UOvgDyxMhL5nsZGrWXju925X3WQsbfcH8H9+4JcGQQBccofK9paZ+z7njyWnR9dX8kbTaM-mVqdZYCt7ylE+TEBYIgH1z4pDyPyvD7WRL-faHpPp9uzsn7NJYf+PVSM-uhXx99fD+j6Gql+ty9yn+zyLeN6cOZ+-2AOMKg+N+zwd+hS4+A0z+Gq0s-y1W4B5ipeWeXSq+8U6+KBgip8WBMSKKOBx+AGusMBAUAOfwCBf0PuHkWQRIR8aBAUp8FW5qnWAa8+0OzwFea8h+Te6eeBf+vuIcbqLwRIQBsowmKaAgPYVBMONBcOIcKh8+EW2+T6iham2qHszcWhJyiBwCcOJh5+p8GMbook0E2OFAuOge5SROLGoK1O1KdhokEetOUg9OyKySTOD4surQbON8fqtqFBySnuLhvOSK-OwRauEB2aCugMAWyuYKFSJueKcoBK0su+QRj85KUgFyWMuGgku+hGayBRLKXUAgAuk2WanKqRUugWXKfm82zcWMtmkgGuORouh2+4FuWQp23MthIktuse9A12yqd2Uoae4xzIMR9SZhs6I+ixNA32hSpBm0Gx4eD4AgexKeXCf6PC6hqcRx36D6LmaeBYtwghooxUIYchYCm0oYHIckoA1+X+K8TxoYA8T+rum0GMro4aCEFu9KE66EzgCkxOoKZRagNKBGkJsk-A0eB6xS5G+mwuhmAxDw7x7QsQEuaRRcPRdYuuTE+uuYbmqOkyMqzIaQ6mEJRqDKhJMJGG7MXU5R+GvcVRrJsEH8pGZgWJZiOJakeJrQLRvKWMGEfwMITyDwFJTmZkFktINJAOoJGo3RqxsUrBmp323R6Bso9JSIWpXUC+SBI+JpaQBp5pRpVoEUgpXUmJjpVxUOPx-67IusrpEOUxEGtJimjQBASIDATJCWKJyWyGqWrhlG8gfA+WzgQZIZHA8ZJWvhkg-h+hNMqZ9WxRdIoKOZ+6rWCmnAWZ6mhZTh2ucuuYPOqWSRBm4pqpGkhZ8CI6-K1ZSp22TZ1Je2QqAx5uCWIxZ2RiwZRgDAkxGqMxTuqqQJT6I5IZx6P6EBd+85Y532hZOxc5SZY5KZ98q5oZxxHpZxXpcO+50eduSOWCwJkyUC38LWWUx2POEZVZdYbRi2mWz4LAhimypxj2GIbC5GXeC6IGl0jS0GIGYZOOiWkm+OKGTgyGLEwy-57CN8qkGYWQX2kcGMYODhThkZ35BOS27JSFAFr8QF-uoFrQgmkyUeuF0FDKPO756GJFKFj8QFGxlFeYJZHAexdFEZPOiFkMTIyFgF04Lw+pWFkympkFjh9FUJnxgl8cwlpFqFQF1pS4as3F6lMleFbJiltIOsIlZFYlXk7gYkvkOInFgQ1FimTUDk0EEUCyEZelWELFol6FiUYUyUqU1YVlK4GMnl4UsE0EPkTlLJ8lMQxFQl8q7lFY25DAflkgNljE8VOlclzhKW8FzFQlA5UFJ4JAEqSMiOylCqDuN2-iNcAO1MOQO0nA2KACyGT54VHJ8gmE3JlREZIYZAzuJRoK757Vq6dK4Vx475PV+ZlKvIbW4VnkfkXqVq8FFgkJnkqWY1EBo5cESEAChmECN8n8d5q2CCL53IcGR1tIGMt5MC954yza1ZvWH8F8V855Ux5G8at1o2Um6VMJr1b124TFn5354c31cuqufesoGM-y28GIyx66quDxVQa8rS46Ku4RV5T6UCt88ZAR5S1e28l8u8K6RkVA-E5e4IjsD1u8cmXFHMbARNGoeoR8VglN44UqGNlAWNlIN1Gkus5NjQcaLaDVGVqi4pI2FyKw+wBysgZgY0rIAGPNpcCp3IuBEOFafU6NcEktBcTNcu0Y1NtNAtp1r5a84NjOBcRgUNYtEtqIBcQNP1ttx1KNNtdtrYsaWtvWSYut-EzERtkyk8qt4t6tVt9ejtTtuYquwdIdgQsaCtKQxQqNGq-S-iONt8eNjQuOl66NJgbNJqSdO8qdBtOy4RgtIu+dgQ1VtV0ezc2Kgtad0d1Z9s4Rtd24sdoN3EkyS1BR46UZWVfWydV8LVcli1kyKwF4dQ0awgaw613QHuHdCQhm90S1C6Wg-M5du+9Cg14kg+sQy4M9zo4sC9k8yoRSK1Qgyh8Fe901WQB9WgT1QU3AbAKMDEQyuYx6juidctad2JK8kJLddcWG8UkJl6C9igYUNc2CeGBR-mfJJSO9Hcv57RU8nRhx4D69UDK6TKxSEG4CyD6DkDEZMDlmDGvmCDiuhcSJvJeD69GDBD94n9zwxoqws5GqGMw9o9CGmosZMJg9oElRXVq1Fy-VU13DKDWQo1c1E1OIXDnAxU4sw0FAJeiOd9D9RkuoVgawsjJeNQERvud+s464i4yU32KRDUl9a484G4ASZJw0BRosowup8UK53V6GqSI+o1hFboZJu6S9ZAK9KDTBnGeRFiHSViXSL9+SfUCQaDlcpe-i4ceZR0lDNjFwVeH2SNWlvjA0fNEdDw1jcSLMTyfR+2EpkgoqqTWQDAmg1A+aWInsCsjKdCSRhuSkK8G+TKOaXjtVOQ60vR0oT6kRPJeCfjrOoKmiagic4TZgkTJKNj9Z3+JaNT1iYS70gxvgpTbiSMq9rtxYkBgGcOYSM5mwaN0CP8GocTYRPAfqxJrRZk-jOypNVgDVIRtIMU9DXTMdpuRTYKe1l1B1I6vC5z4c49Y4MUF1xzgLpI7474p8hMO0HuJ0cT4Cf97DuYUphcbRcjdVbpuqVISj26dYwLRz40YLDwjTEBJ0QFwDb0JE0YFLW4rYE4nYQFV9RSCj2L94j9Sz2LuJ3eGLvpt9rLE0yjag2L-2JE9LZYJlh9y940-TfYSzkr3j0ru+90YrU46FZDJciVXFfTSrorj0DLJlTLHAK1SzmjXL6LRrC1ozeaE0N6Gj3dmjgiurZLJlfkHLOIyrer4r6FxrVL3LFrXAHroqcMriBViMwUKMjI6M4Vq174BM20u0JMFyboZAOekJHGgQGMS1Wod+TA32IxebF0mTDwH2d+aQCVsQx6sQjMnKTAoAAApKANW+Ha0HfioIY0wFWzW13tW0Wy277vGBhYVozMumOE9okr7n8FkG2z2qyvmz2pfgIAAAyxPNuBD+7LHUIpvh5vCA1jh7qfZbETs0wb4JUzt1ELrEhoN+7Ei7vkkgaeS5tXtzu9u0j7v5tPuFsvukgbEbuDubzDu3u0hZDJs57LAWO6D1wQOIMgesNrIXuxAYCLsABsgwkHlDkDMHnVw7sQAALMuxB4i5h81boOq5BBh1u51bm0kEAA","body":"function make_new_machine() {\n    const pc = make_register(\"pc\");\n    const flag = make_register(\"flag\");\n    const stack = make_stack();\n    let the_instruction_sequence = null;\n    let the_ops = list(list(\"initialize_stack\", () => stack(\"initialize\")));\n    let register_table = list(list(\"pc\", pc), list(\"flag\", flag));\n    function allocate_register(name) {\n        if (is_undefined(assoc(name, register_table))) {\n            register_table = pair(list(name, make_register(name)),\n                                  register_table);\n        } else {\n            error(name, \"multiply defined register\");\n        }\n        return \"register allocated\";\n    }\n    function lookup_register(name) {\n        const val = assoc(name, register_table);\n        return is_undefined(val)\n               ? error(name, \"unknown register\")\n               : head(tail(val));\n    }\n    function execute() {\n        const insts = get_contents(pc);\n        if (is_null(insts)) {\n            return \"done\";\n        } else {\n            inst_execution_fun(head(insts))();\n            return execute();\n        }\n    }\n    function dispatch(message) {\n        function start() {\n            set_contents(pc, the_instruction_sequence);\n            return execute();\n        }\n        return message === \"start\"\n               ? start()\n               : message === \"install_instruction_sequence\"\n               ? seq => { the_instruction_sequence = seq; }\n               : message === \"allocate_register\"\n               ? allocate_register\n               : message === \"get_register\"\n               ? lookup_register\n               : message === \"install_operations\"\n               ? ops => { the_ops = append(the_ops, ops); }\n               : message === \"stack\"\n               ? stack\n               : message === \"operations\"\n               ? the_ops\n               : error(message, \"unknown request -- machine\");\n    }\n    return dispatch;\n} "},"captionHref":"/sicpjs/5.2.1#fig-5.13","captionName":"Figure 5.13 ","captionBody":[{"body":"\n\t    The\n\t    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_new_machine"},{"body":"\n\t    function implements the basic machine model.\n\t  ","tag":"#text"}]}]},{"tag":"TEXT","id":"#p8","child":[{"body":"\n    As part of its operation, each instruction execution\n    function\n    modifies\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":" to indicate the next instruction to be\n    executed.\n    \n\tThe instructions\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"branch"},{"body":"\n\tand\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"go_to"},{"body":"\n    change ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":" to point to the new destination.\n    All other instructions simply advance ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":",\n    making it point to the next instruction in the sequence.  Observe that\n    each call to ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"execute"},{"body":" calls\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"execute"},{"body":" again, but this does not produce an\n    infinite loop because running the instruction execution\n    function\n    changes the contents of ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":".\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p9","child":[{"body":"\n\tThe function\n\t","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"make_new_machine"},{"body":"\n    returns a\n    dispatchfunction\n    that implements message-passing access to the internal state.  Notice that\n    starting the machine is accomplished by setting\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"pc"},{"body":" to the beginning of the instruction sequence\n    and calling ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"execute"},{"body":".\n  ","tag":"#text"}]},{"tag":"TEXT","id":"#p10","child":[{"body":"\n    For convenience, we provide an alternate\n    \n    interface to a machine's\n    ","tag":"#text"},{"tag":"JAVASCRIPTINLINE","body":"start"},{"body":" operation, as well as\n    functions\n    to set and examine register contents, as specified at the beginning of\n    section ","tag":"#text"},{"tag":"REF","body":"5.2","href":"/sicpjs/5.2"},{"body":":\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":7,"eval":true,"prependLength":449,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0AcwFMKB9AJyYaoGcKn2ACgC2AQzIALKiSYAaUJwasSo4UwCUoAN65QehSyLt6YydKaCARMzaLe-dpfWDFy1RoDcuAL75i5ajpQCgBPAAcLaT52IkpaEk0tAwojegkmUQATQSiKGLi6dQ9QX0JSAvoAGxoaAGsiMNYw9iphQR4Q4QAjGkr5Ggj2UUCSHkTdfTI6PlAAN1FK0ABeUFEeHhoyds6evtABgWH4sa99ZNTQXlZSTKYCc2z5yvUJs7eAflABdhohDu7evJLKRaiQaAB3egHIYjUAAWjhq3WTG6lSYTleb30AC5QOksoIKKIqJVBE91EUfH5yrDqnUGqxKqIukxSUyWZUePJ2ay3GpxmcpqMKHMFsskRstjzKny5KBpSdMZwUsZLjxriRbvcZI8Fi8sR8vuwfkJpbKgTc7g95czWfDEWseCiumiMQazriiSSyXqvKV-BVQGJakwmi1hFRqLNQ0wAB6NO6CONheSmKQybm2zkC-RUAigHLqoV8UQkNjJpPxinaTGC6Yisji4tEsusZOsJ5ECzJynu5UXQSaJYAPlAZFO+m8X05TEu+cLjKzbfjlbC1Z07ubl2FPHFdPqjWlggVmY5y8PWdXFInWP7qsHy1HuR4N5K06dc4LVzsfAE56vOZYlu7DijYHBcPYAgiOI6Zyj+DjnuBDAAa+Zx3vQD4jowLCsEK-BljwLhFKAmJTqyH4bga3y-KuFokKCEL0MmnDrPEwThLOCISs6rq9pOVJlAEbHBqG0JHHQiGJsmqYweYp7kf0gziaMgFjvW+xhHuNQHmGrSCGJIyIQMV6KYcIyKnWwqrP4u4rGIYRJo+QaiCGukRlGMbxm2BBJjJZgZjaHJjLItbumFBnxEZSmaoRPZ8Xo6EFkOo6iGEYSVCErDSBqtzsBl0hKAAVqI8w8GQLRhBQgihWFWIDDJDn5lhPnqPIog2deAkBrCjpUAwJAuBBv7sOaoAbEYZAaDWaGGKqlT2FYvX9ZY8jwX+KhqPI43sJNlK+N1bFLSQSGyoIR1ZcK+QjKpiX4tkXqkuduRXfEnX7TSh2sf1HYLF2-5PZdsTXdoJEzSqaQZPdxKkg9Z1fcdz1A69b3UkJQQiaw52JrkfmwfJnKmTCxzyGEZCqVuRLsDYoE4WtQhpnJEp9cdrgbZEwqdZZMydp5mkrOdPP-rk8VqVZgv+MsNVqqwEUSRWgs9lLnwY7Lx3tomCvxrjjMnhpZnHPqBq4hjzStJGVDRpJPmaymzn+XKCoi4lmGjpRtX6E6bB4UwBGEqIVMsPI4ukIOIvu1k8zkKGpOCKTxFS5Ofqo4GEelpNTRbHH00ezh3u+6T8iw2BecUIRcfXiR-ofejLmhvwfDeTkwrawFuuq1yoAEEyDAk2T2d6FuQqZObQQrPXXt0MPIxN3wIt5l+6qq-+Q8jwkqlcw2k+r6wEt2bXMtKYZ6s+Qn7tnwPW8jC3cqn+f7tt4fBuofozvJf3d96J7uF0PhpeCF3oge6iynpFfwodn7n1TlHDOscybFFvmcbwr4yIznfmcaiQgcagEsF0LIwQmAzERoGLijoeLohFr4KuaN6Dj0ECvYGSRErzT4FYceK1gGr2Iu9ah+CG70PiISAhbAiEMKVLNCGBJYbjwutEJGhR45UMDBjLoQxyASEblghmrcswdwAUArObtRYzFuDMFYKi07qJMVVYWr554LjNBWKx64pZbmfFpekF4OTHh0fjRCR4nFhxfuIpKTlDEfzscXH+Ps-56OcR-d0X8S5lzIPIZ8gTz4oIogg8OmRI7pxjnHCBZ9fAfyQaRd8s4wn6AwTPCgQJcGZFAOYtR25ZHEIdMiVE5DkFdWrvQZpkhvEckSOcOaC0cGqMkOw6UXDBKBgGZYoRggFkyLyHIhI79bqQz9t6FZIjkbwMUbCK4RIGDMEyIyBaUxhBhDoNEwu6RWCnJusEq4YRiRCGubcmQZZNAADI-l4m2V8u5vzlhLDHo805Sc5mwkUIINmIymHjMUOwxFxRuGBm-ENBCFYewg0SicwB5zLksOktg1FsyDpBDpoheF+LGHBLujs0kcUMXJ1hM2UsVUeZIuCcwqqlguVlnYby9l1L6BXGFeWFcDKxHg2lqcklAraLYOlU4JOEqjEthlY0HmV4CVMu2bDNlJQOVsSPIiw1CqVWWGlGi9wVK+nSwcbKqs1qLhErOUwC5KryV2qzBqs1WrXWeNZAaxlCrmUmqrLM2FbFjJWsjRcW1AwHX8nFc6q4S88XusMYS9U7yqBCHxQCxVxKfWkqqsynsQI017XjUEHNXljIDHPHyqNxroaCGZW2uKTqeHNsaGJGK+kEx5tGTQ7tfaqzssbSYfeDAaBPOXdjZuds8aBQUqAAxmItxWNAsuigy6rG1LnvOK4obBABLQZMdSbiVj7gZEeXWobFxeICUU1+TlElRPzik1ppcKEVM-AuWljihFxINMBLgNNbA4qglouCCGRrtnhZ+qW36sK-rLNE5J8hIm4d9ooTmk4QNVL0DUrBOC8FLpXYBl6QQSGdJdN00ivSeF0ePUM1kHaU3jK4zQaZWYB2BkE6wU94n9mFBBvKi40bu1ScBhUCuHHAy3IciWMgtQXkKq07UKwGmNVUi1WEIgPAJDtCJNpoOv0pr5uCfpwz5mJBOB9JULsDb53OVcjwEqMYfKaNkgFfTvdybqUUHBpCkF6bBblPp1ZJ02ZnqdsEl2t6wpmYs1Z8QtQCO5z-X-Ej6T3RQPyZnOBt8ymYthBjFix7OAaPXUhra1m8s7r7oYmDDAot02gvbVruXEus3cCl18WHXbZM-gVojRWuAk2Mvp0jkDclp2jhV+O7tqvmqCH56Mg0GB8bGSwywe30SrS4KJuFQjfgWBIx647gr6u3fYSRzNPCEu5CS6Nz7ynRFg3k1270v22nXS81qk2AgCC-GEE1vg198Yd3bmF9+W5xCwhWIMaH7BYfo4ETYzEdjs2PzliuPH8iMvatWBUHepBxQqxJ2rLyiZyckAR1N+JnO9AP31tMErE3ZNc+p4ZMBm2udlfW7AsXGTkHkallR9dNHGlY5hwx9Z9puJdOM4gtTsIVc47Oiph7VRxn6+EOw1nV22Jm8xhUWOUOYerMYxshznbJHdpt9JteMKIf7zjEwMgRARd9NqYjhHoMhfnwLp3bug2bMaTGJs4JoQIhnvBSsSwR1LC32VvvLGgXmtxbDwnsLt9PQcTTxCjPbCc8+brkIuHdSN06x8SXmPgDS-u3L6n4W6fsELOz+7XPrkVlrvh837RQV5B6M77Vbv7NZ59+sEeoTteMbibH03lrW6CYdcNmFefleIXYLO4P2qw-Qxncb+H0Le+y-sR7xzJfz3OBn7Chf8CfBbvX4n-Ftrs+D8H8F8KAhxj9LAst1ExB2AQwRpj1WB9M393QP8IDWAoCYCV14C2tG5t9b84578U9gDQCM9OBox2A2AEs4C0CBBECDQP8SCBByCsDKD-Z0DEwcD-878u8gCj8M8zcaCsRkCHcccf9t8H4O48CuCFdx9gR6IwRIQ1dAwCCNdSEtdwdnUMZchalv4ywfhKg0QRovddMLgi1MFhRtC8heh9Cnd1l5ASAiA9CG0tUvs8JdCrCvc09XdAcCQCcas2Ivt-dA9g8Bpe9PDVRYYfDvMv5-DYwA8g9QEQ4sF-BVIv5wj10kifdnUGhMhhhQxnxakO5dYkNwsrJSZesUN+tN1wCyBtc70rI9EyjuBhoKjGZLA9EaiL4rJ9N6c4srAECRYtwBhbJf8rB252jJ1O5fg2wYJakf0cJojYigjqpI8z4cYOdOcMYAi4iJIJUljli75nCf5XC-x3DhYQo9i75Cii8Oszjziz4Z8xoODBiKQbiuc0kMieEMYHEdCQgeMZQ2ZUkdwjDVQTDfjRo3jdc2I4w8h0d31yI6FDjLCBALtJoLZ7M5NVQrg7C9D4SdDET2B98kCDAUT9ssS9hSSCSjYvhYxoTKBYTORdiP5YYXC8TWo1ivwdxEc34KMz4twZBqS2w0Q1AyxxRmVmS9CBASt3YC1MCWgSBkI+TyxBTokKTljPhOBiTgCuQ2ShcQTPilxol2AfiFSBSUR7ltTbj4k0kXiLTz5HYVTI9cR1SmBUTY4PloJXJNDjTWRTTflrSbT3YrTzTOdHYikDRvA1CeEVDWMcSLDxT2Br4gSmJqShhaSFQYyjj4ygysR8jOTQksywosicjVlCJnxi8ijQzljCUdwKz4lwz3ilF94nNVI0QRQuiVhSTXwWzO4hg1BxQOzMRTMXNUCWCoJ159ACAezZxMc3Tb8JzHUv1glLBMg7lLAekzhTM20qChAxzP42sRTtk5yM0pZDypzghu0Tz+dFzlyZBVz2N1znUIDBBYwRkpY2yd03TYw48dN4E+wryVy1zxyHzjIdzQNMT7DSQlsQL0FjQaJLAURKoQgHjcsNcjMStMlKkEEKYBh9yCQlsaykLtNxRYY8KEFEpj0wgikSl+J7yeFpBzYFgqAAAvCwECt8-s38hVJc-8u8wCnhYeHgd5CgQZNQdYQBNEjii4ESvzZgJfCA-g9-HdFzDnY2AhaSqcsAozDnT4DTQcZSoMVSsS2Socrc+SwklArc3Sj+FS0SmSqvbBDTYc6A6grSndTckc7cvSqSwyuyywOi6gBi5i0y2g7cei+aZiyyu+XEGpLy5gOiBieQzgAARy7BmC4j6IAoSmCX4sEskHrNq33nMvcowISzYKuNwM63RIwi5PNMKqcr+Da0lNqglxgUKTZO2191cnoLIMwKG2YLquwLKo4N3QB3vGqp1Lcrqpy200arCmaoKTgQj1KTyut2MqKrgKbON3lFN1Wv6vWrayDV8JpSYFIMYN6uXQsqOxNxOy6tOu0wwJMrjQ3MaAsqWyTz0za0MwmpgOM0OvoFqpgKmp0zeouCc3AJ2u+ojIbM6vKKTUxC7KSXFEsAACpSAjofUkbbyaLAxsrhhhKDLmAQLEoYr1KM8bAgqBDRZf4eBPL8aSaT8WBybDQeZQlKa8NxQeZ2UrKjQTQRBaa4q5D6AkqUqRQuI6sUMxiqLMqFUcahKJBlqggn0HIQwQhC5mQ0RiiZh1TfhGl+Z1hNhBBlbVbvQiRWNltxirhLRtQfVBoph2BMh7SzhPhLaHh8Du0ta7bHDnVHR9bDaiTtbE9QjJV1RSSbb-aHb9AnbNQrQdR78mBkqFgDamAVagUCRmV3bMgxgKRa806A8w779vathfbYZ07M75b6BCMqaDsYtEyDBGiHArAybPaPsZtK66ZbMPNxKgkFU+tTsGbnAxUISa5XIZBwRhz7YHwut1JSi95oa66oIqixitx6iZ7Qwe62j+j1I3yMYmzOyWBghHkvd4C46uwo4+zwLd6RQKBHlBi9wFpbU-KqAArL99r5B0tQaH6n6nAzauzaUTa0Rb6WFbVSZ2E45uRxk2jp9u4zatUFhqgyAiy+tYb3Qid1RnadQ4ZJQEV3ALs57YC1aNAoNapf78HxQQSVV-i69osmjEVWT-SDRiHTbKK5cz4akKHLBhB7DqB0pEKtRrQ6YxidcJLVRLA6ZVg9DNgcjMhMbqLeLAxFaqH66kHoN1InhxQC6sHNpa6Ysnl8HLyFULao6rbdRngXLWHsHsEQQBatHho3RIqU6oZvRyQKEBznVNj+AJ6XF70dwoskkpcikUHlBwL8jCGwpEouKbymHyIMKVizC3H4iBpmU0lnAZrxi3GWLKKeK9AtUZa8abLO6sQtUSwyCPGz4cNK7o8r7ci-tIonRkqfZdp8LEo0nBwMmhGTBaal8imKBGbHakLinw6sRrK1Kl9chYHrCadamT7JoemI6xo46WbKnxnDJJn6nTzanOa7Hial9YGJH+AFHnKP5Pgdn4G9m6Yaa8ml8wJ+GXL5GzmuatmfLRm9CD5edRgZm9BPgb6sIkhFmvnVg0ofZ7pr6wgkcQXZl7mOmfKECXL9NznhmfLRiXLfmQW9Loq+aLHZDGIDA6nUrEQkMJbKrQAcm5bB6F1XIkMq7hpZRQWO4xT9CNaRQkNujh6mBR6KWRZscpjBlaU2YnIOcKXM9xGTnV7xbnAeXHV5BslxWRKRYBWnmZRRjnAnjXw5XhQxnD6Vmo5bGwoMGyF0y8SEzUsFUkMy6+mqoijgbVQBWumfrvMrmUNzC8NmiAppX8nxiK6nX7XcHnXkNcHZQUZCnaYHXfHt9XX27PN34ynPWg3vXQ2HXEVw3PBCXwn0QYUtwGAyALkmWlhMQMYKWpZbVRB2EcFi3unaGDQVVbVOBzdX7RB5Aug35RBQAABSJpct++cZJYdhM6etxtvvBt9tt4FVU+SwaRLoFaBBWhFVYySwLt1qWuqwcd+d6VQQAABgpEHfdAWV+IbszYkxXOeIQSOlYWmQWhneracBwcWkvYXZLY3b9INGPcz1ey4EXa-ofaxCffHavdHffYQUEx3dHYbyXc3beGsD3evPIUpC-lpV8YzazauOffkAwFXYADZoOY3tG4O93t8S35AAAWddrwLpwQeDse2CSkL1rDwrQiMj3DotooIAA","body":"function start(machine) {\n    return machine(\"start\");\n}\nfunction get_register_contents(machine, register_name) {\n    return get_contents(get_register(machine, register_name));\n}\nfunction set_register_contents(machine, register_name, value) {\n    set_contents(get_register(machine, register_name), value);\n    return \"done\";\n} "},{"body":"\n\n    These\n    functions\n    (and many\n    functions\n    in sections ","tag":"#text"},{"tag":"REF","body":"5.2.2","href":"/sicpjs/5.2.2"},{"body":" and ","tag":"#text"},{"tag":"REF","body":"5.2.3","href":"/sicpjs/5.2.3"},{"body":")\n    use the following to look up the register with a given name in a given\n    machine:\n    ","tag":"#text"},{"tag":"SNIPPET","latex":false,"id":8,"eval":true,"prependLength":456,"program":"chap=4&prgrm=PTAEGUEkGEAVQFLlAVgHQCY0EYBQuAzAVwDsBjAFwEsB7E0CgTwAcBTACipIGcKAnIpVokAlKADeoPqwpE+9ABasAhgBNOPfoOp0RAblABffMXI76AGxo0A1kWYB9ZnyoBbdt0auARjQsAaUBo2PmVzbjFxXFAY0DI6XlAAN2ULUABeUGVubhoyDy9fAKCQsOEIvWjY6Vl5UCpuB1JVVgIuVnUUixEq2L6YgH5QVj4+Gj4Cnz9AgCJSGxIaAHd6YJGyulAAWi2snNYfC1YZnv6zgC5QJTV2CmUqC3YukX1cY0JSIU2rW3sHC2U3lYjwBQIs3ECoOBDhIylcrEivTiCQoyVSGT2uXyUIsMLhrEhgOBFSRNTk9AaTRILTaJA6T1SpzOfSGIzGExxePhs2arXaqlAOO2u2y3AO3iOJyRzMudweDO6lXepi+9FcyhsrCcLlcVGoSS1rAAHo5WuxjcxAuqyAp2oSwREJEiqARQJxGvFNMoSBQHBbzSaXk7mcjNHEMZ7eN7fRaHF0iBwLa8Q2S6uwxOkAHxxSp9QzDcGsequ93-Im4-1JxEhyOori8bgYn52Rw49g4iGC8t+k1lsEB5gvXPM1P0dMZbP1ijcYcxfPEosut2U6QAcwaFBGPeYA6DURrKKkGNXMgca43I3Y1ttdMC594W9ja93yZHMnJboz2ZPvs9m593DsHw+igEi86FsGzJsuMA48iQCzLPQFrSDkwgMCwRY7Ji4qSq+c5vCYnzmKA6qag4ayhOY25+gQsEkcoNp2l2DqBBRGw8NWsS1iUTbWC22puOwbFUbGwS7qxpThHhoaJMopiNpk6o7kWWb0WRzhuHqVAGtRZoEvRjG3sxxIiP40ohhZwnCNRbHUoBVazlI75pl+WTMMwFiMA4XBUi0fCeVwq4OAAVsoKTcGQLjMBQ7DmRZZzBFayg7q6qm0aZWTyUOBEfGYaGilQq4kEBrDrg+fBcvpuRyGQCKQTEo6Chu7AzAVRUzHepUXhVsLcqA1V8LVrzGCqxFtSQZ6lZV7Djd5mgCKqnENc5igqOocqPLNU4LeY2UjUR+WoUVcapAm24zUdE3bdowiRKBfSNdc633I8G0XdwhVXfNN26HthF5ZspFarNZpTklhn6R2EnrOEgTMGQS0yaidx8D+x6nvem4TNeTGzWu01TtlfTcfGhomhis2k+dhOOSTp1aqYGRxfUjRWXQ51U0mzNDED5GSdZsZmpzJrgzekPlp2bMcczly8xpur6mTpq0cLloGWL9omY5jXjqp+7xX0Yq-nQ-7TrcyiozIgRU6Y6bSQbagpOQWrw+w8MgczsSGEq-2qlkqhO7VTj5O79X9aef6sABbtkIEb0-g4kfR+7Q6gcqB2AxqWqbrwNEaLwotMVDJQw+UgQEACq5wwjYfcZ6qhaZsmQ58b1KN8VNPOiWlJS+d9ft3uzN13QDdUYzilZ3zpfs4LtGewbC8xP35iF0Z8+LwbxdSySKYrZ+E5hxv4et6bgEV8oVehqP1m20TR+xI73pB677sGOveaOeBYqH7E0ETGDoAZjeDUAwVgiRrp+ywqKHCxxpLGHTgDegLd2DL1uhIJytRLDNRmC3DqV8B4GH2og0BudUF0FuGA30EDdph0emtc28oW5zV4DtW6HsEF+15t4UI5AFB5wATjIyxdz6X1DvrJeh4WiJEyNwp+fCpExU7n0JcpZOT+gUYPA8YYpwKUFHxP4bZi5qN7G2DR9tqh711tmcR98VEJyTmbERmj75nCNonE2Uczbw0CDo8xi8v5FhsS4mIj9nbBxjn4hexgj7ezAgWb+QTf6jBggAoBIDZG8PqN9SBIp9iHFgZ-HKo00IZJtO2csd1GoWGwaUhQeCcQgSIX7WpDgFHsBadQtBNi6E3Deh07Ju12G+2IpSO4q4TyqH+M1eIrhmB0E8XHJQDgxmI0apSZg9wJgzLmXSH0YgABk+yrj0O2fMvZGR0jNyWWMn2uU-bPl6nVSQVTsFrjwY8xpdyRmNExo+E0u50FrMaGMiZUzeB0RmG8z5xTNi-Iqk+UqALnl7yegwx4DkjDDLQrWaMCoEyVL3tU8FMwcU+jwaTaFGcKQehRNGc6SZaF71GRfUFRKYoWlmKSigJwfYwvoFy6ipMkUYI-Kit6GKOHETbB8wFhLsE4nefiSlxDKTGOUoGWVmCWbLJZR0MF7KRaAIVcqv2aq+zAmFT0568oJVYs2GJGVyKtVspasERV8ITXfKnpRAW-yGXdKZY0DZVAJgMsOdqkFeqXWoqTLMN1w0vloV7qJHcwRtwEq1WKl67BUVpqrJ6pN-MZ69lsqoQCeaNVOo-G9Ctg5CF2rVJPVcNBlkttBpoVe4sWKgDEUibiCjjwtooC2tpSjYgqNVd2dRlDnFnG4jo3ivxWzlnKd2s1piZ2RJ1q5NxDjALeKyQ2OB8TFzdx+V1cq50zE-wkWGNc6NfRwqvAxDWTkypY2os+MxjkHqWJ3RHDxydY6gHsYBs2a475zhPTe4YyT-4dsAcAgUzbW2Hq0Dk7C+SeVgSKVSkDQ6aCruBBmj8LqZgoeHfUip9a+X4dba0yh7AKMts6bodBpIUX0PjgR5h6HBlv0lWhOZO4oxkBsKsveombAtWE9hppxFmBEG4AoDwdwxPW3phJrVUmZNKbqSIPFCJbm0d5twMKhpaICJfUxKT1dEbcXvZkBOT7BFVTUzYXjk0gqPPzhQSDIqXIH0SRZRTynVMMRsIEUDPpPGAQg5E5koTn4hwRj+s4sT5NoV5ihYd0h+EIdc4EWzPaa42Ic6VB9XnurPohkV9znn8Y+cJtJbdQX36xF3WBuLpU4ZiSk-5h2Acn4uxSx7A2GWG39XMyVVcJG6hkbMwaPBEGaN4Zy+MDgEHNWkdeZQjby3SoFs2FJhrU0fMndY6IRlmauPZouwMthxm8NyxGAQcYrh8sF3VkXCW0MfUJDs7XQ8DFiKZBCG9vgH2QfCF89JCdrMi0TX9ND36MHuIo4muPNSWpk29jNBjztZlgnE4XlvRHO83xaqsex4nGOHC3zfrTobYSX6pfuhvWJeZoPBdg+yXzswkM9te+9tDrDNhQLyRKApOHBObHB+9mai1tvzewfLyHeCMdHfoGrqHqo3bC8h7xsXV2A03d6dmnXRufqiATYmzOZFjSsDIEQMeVL+fGXBIT9nJODYHpEXViLElHSm+rRhWHFzMitUujMdePNJ4g0swV6zQjfslE7O7desow+Ewj4A3BsfsfLMoZ9igXuyedn9yVpkFks9sHD5cyPtSY8Gzj2RFp7avuFY9xXyudnM-oTrznhvgDmPN-iq3rUzGS9l9Txng2teOBD8uYAxbxwC+mfM9P77Rlitz-igv+vy-IV7ekGPiyE-Jq8A21vrvu+Eb96YIPzQGYj+hb4eqPgmoKrDocFJs-IYL838HAP8v96MTszRb93M+958B9F9n9c9j8DQ+BfQTsf8QCRh-9mQL9pAkCUD6s0CLZQCIDk83NA8q8H9s94Dh8ZgddMCzhACDcPsO9S9t8u1iQg9oD99ecUkEM5h4JFgVhRdrdYDhRMMpc5NJteYpxfN3EfQxgLAjgKpLstMPxg14NSETZ5DFCrdVRAgSAiAFCE1aMpxZD+A-BtDLtw8Q86hUVO5MtNgTDHdndXcO54DrCkFs07C7d6A3FHCjQncXcb5SB3dTBEY3E3oAFQintiF7BVAwgtQdFfNOxi5XN7NDx4ZKsXMSDZh4ZsNiZDwRFMiL0sYatX0ZgRE8iuJDwpMMRXMWo-9pJuJghdE6iZht5KjlotUIc-QX1fMD5fDNAewAiXDYofcDYwZ2tideYnDAj2Y+VRixjF4TC-wtCtxLDCYidFjSdU8u9vFJixjK9itmiXhNjglfFojOFJ41E5DGAiNcRHkfFNBg8OMtU1C7jKpHij0LjiJjR+AQdzVwQUFNDzCRhOpaptInkXiPxKR9CFCgS5CQTgIC9pBwSDR2BYTigMTq8QxLhfjQhKAATAJ9iYg3oVjETTJiTlwnjNZwRXIecDZuI6QjQYwjh4QfQMRUUySFCRgEt4ogVf9+BAp0Tfi-RWTPFsSxihgUTWAISkjTitiQtNln0yJrj+BbimSWSDgFlKSFTbEniKTdSj4OwXgdScSnJUSOA3ipDNBhTmTRStS9l5TDT4pfEnTnTYhjS0sLJDBbdaNoF8l4SzDuS+BO0VC6g8T-iOxAzViQzTTmQ5Tu86S4z4pYj4jeNAIdEaTOxUivTFi1knjczgkfTvistJ4dNEYjhUQajMgMTHJKzQACBQh4QMRaykRaMgD0CJhEY+hGz8QMQ3jiteyPVczGoZhVB5kZhCkey8NhNgDCDLxuyOt3MOT6EhyjNmY1yMQ3o1yt094xyJypzYh2y9N2AjQ7pmZqye0lSjQA8xMxtKcPx9y6RJycNpziFhNxwed4cYQDDHh+tFyzg-4WoDhopGB+plysJZNIkAkYN8iwxh1mAVybh+tCylyIsty7t3NeTOjq1ghczokvY2y8MuAtJUgqAAAvDgAC8C9Cms38kcvc8c58w8mIWjBubgDZCgMpeEHIC+SE3eLVHiszE8BAt-Og8-HtPTfY2WMBYSlSV-N1fYoYD8iUrgoSvi0SvTOcz-DApSyS5TbSr-dMaSkiWSjS6g2czs8SgAntNNTs4yo+GS3ikS6gki6gMiyi6yrArJUi6pSihyjeXEuDK8Myk8OCBCQQ6QAARwTESCwgaJYoC3oHYs4ptBLPtxdi0s7LAPq2INqxovUyr2uw-Gp3pPig7PnImBQtNKSxGwiVQuZAmxM0nhwJGDwIi3o2yrytfTvzDLHCTOJ0ssqvCzvIapDFqvCVfm9w53Su1yysqpyoi0-KSqamJQqp0u-xbQSsxVo1auQIFI6oII2uWpeWJT2varE06sqp5UxW8NsscHsv62KrqB0xoLsuuqMJnPmuOqevcIKukxoO+q-wkLuuy2KMvEdSRHrL3QxBmAACpSBxoOg4aXy3y-YUqwhuLQr+KHy6h1KXKj8fwvL6DQxT4TL8b5LI8jZib+ghhSYgtSbYsMRSZ61HLuDsZsbwqBD6BorYrUQsIwb30MC4EoS6gMauKFBZq9El12BNRGA45AQjg0i70ndxgBRMhRQ8hZbWB5aGBs07gpd-N+TeRaR6QUS1bVLabQATb+QH9s1za+BVBPriFNb8g5awS1bnjf0tUYTfySp4hHaIgC8ba6RVB+9WAYrUhtbdbUVUUHay0XhLaWRjkbh46g6YDXbo6Fb5Q06-o7rotT4Ztuo+q31qtyMZAJDaNOsYto44UNMLB8VnqebwaJgZhqaDMKUpbeY6Qlg5yIZPy+10iyBaiWqW6ZMyAOikYGzK4R6yIn1yjK5J7uJLzTN3N0w6yZAGAllLtf8I6ExnYWz6KobN6KAllmimxmoyM3KqAPKtQ-9AhqdXrr7b6Th-N6y4UdUpcL7wUyNci7NIRsEKjy5K5-M-SFC8g0yn1IaQxvyQ76RM6HjS7L0DalbZ0LIP6UGVIryQ12xmpEHBbqsPkDT3Tf0hbv9Fb1yQwYKyqYggLEGZhXADDqAPIwKaR+QkGsZJ68xmZRy4UshwGyB4jVBUbCK0apV9FHAoGlU0dDwugKYcgtbEGMGKHdyfbGg4HOhGQ9K6H8QubEIOHhaTKs15RngRaxG0IZjNwB6tFwEnjKs916rmZvyMSki0GBLHymLjh8Lud34-DhigjipbD9SDNsKVrLGqL8LXyjy8NxasbnKcazgq6UYYpqLDYAMa6vFgNT6EiHt2YxQYqo4hoxrGpwn17mYCKzhGoKaECoxkCabk7amUnybsaECpxUhcQd78n97ap6nYghh8mGbsmdCqIunCmsH8nWbArTL4mED2mIHNwqtypenBh+GrBBGFm4VmmZnqDnMW7lnQAhhmw-hNm2bqnXKvQFDvV2JuB9mhhz69Yt6cdmBdFko2BqRbgz7nmg9PlTmWnqC-89KpMtm5KED2i9KhnmiTKgKKa9HIq97KFRDXNJ6KmVrYnJbcNiFeY6iP7HlJYvnSaYzlbEhXNZ6tQe6+6xYymezxgeiykcW+zVJ9jWi5n1mtQ4UTgi7L0PlAh2t6WeLpJWi2nLn2iDNjjHJBWLmOncmJpRnnYpQDZ3oYFozETQyWs95XMpbGnSj2gS7WjGnK68NdmyHTDYttWjI+WEmVqC7TWjXqsu8LW-oq6MYW6TXo57WXXEGKUw5q7C7bXyozX9IHX678VtZGKDyMW-Y-WSj3XvNpG-rWio3haZtKpbduJVwyBJkSX0gkQsWSCFizgyNlA8EgFi3uViGC3L7dtXA8EZpAhvBXJlBQAABSUAett05kMjdIGt5QOtht3Pet8t-oF1eeHBYvbwDqd+ZBF1MSGYLtjKZ8EtjKLldgAABkTvbf6FqTuJanTcmU8dfo3b6HGham5QAfBRnekGrfncRVahOE6lXBanHfXffmPdvfvcfYPZfcug-ffZwU-YXmY23dHdzifcHbOHIwzdaQnOyjcQ-ocd3YpaYjfdAAwBXYADZXhYOXX4PIOu8S3AgAAWNdyoLVhDnM3ARNiqHDzN7IwBIt-QIAA","body":"function get_register(machine, reg_name) {\n    return machine(\"get_register\")(reg_name);\n} "}]}]